(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d8130fe","chunk-39930572","chunk-66786a86","chunk-5869f344"],{"0403":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container",attrs:{id:"teacher-account"}},[a("div",{staticClass:"flex-between bt-line pb10"},[a("div",{staticClass:"flex"},[a("div",{staticClass:"cha-title"},[t._v("学生账号")]),a("el-dropdown",{attrs:{trigger:"click",placement:"bottom"}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n\t\t\t\t\t"+t._s(t.currentSelect)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-input",{model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),a("el-tree",{ref:"tree",staticClass:"filter-tree",staticStyle:{width:"250px"},attrs:{data:t.areaList,props:t.defaultProps,"filter-node-method":t.filterNode},on:{"node-click":t.handleSelect}})],1)],1)],1),a("div",{staticClass:"btnGroup"},t._l(t.btnGroup,function(e,s){return a("btn-list",{key:s,attrs:{model:e},on:{"btn-click":t.btnClick}})}))]),a("div",{staticClass:"pt20"},[a("el-form",{ref:"queForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入账号查询"},model:{value:t.formInline.user,callback:function(e){t.$set(t.formInline,"user",e)},expression:"formInline.user"}})],1),a("el-form-item",{attrs:{label:"性别:"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"不限"},model:{value:t.formInline.sex,callback:function(e){t.$set(t.formInline,"sex",e)},expression:"formInline.sex"}},t._l(t.sex,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1),a("el-form-item",{attrs:{label:"阶段:"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"不限"},model:{value:t.formInline.stage,callback:function(e){t.$set(t.formInline,"stage",e)},expression:"formInline.stage"}},t._l(t.stage,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1),a("el-form-item",{attrs:{label:"学届"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"全部"},model:{value:t.formInline.learn,callback:function(e){t.$set(t.formInline,"learn",e)},expression:"formInline.learn"}},t._l(t.learn,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),a("el-form-item",{attrs:{label:"行政班:"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"全部"},model:{value:t.formInline.className,callback:function(e){t.$set(t.formInline,"className",e)},expression:"formInline.className"}},t._l(t.className,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),a("el-form-item",{attrs:{label:"就读类型:"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{placeholder:"全部"},model:{value:t.formInline.attend,callback:function(e){t.$set(t.formInline,"attend",e)},expression:"formInline.attend"}},t._l(t.attend,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1),a("el-form-item",[a("button",{staticClass:"primary-btn",on:{click:function(e){t.search(1)}}},[t._v("查询")]),a("button",{staticClass:"clear-btn",on:{click:function(e){t.search(2)}}},[t._v("清空")])])],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"120"}}),a("el-table-column",{attrs:{prop:"workId",label:"学号",width:"120"}}),a("el-table-column",{attrs:{label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{staticClass:"main-color",attrs:{target:"_blank",to:{path:"/basic/student-detail",query:{id:e.row.id}}}},[t._v(t._s(e.row.userName))])]}}])}),a("el-table-column",{attrs:{prop:"sexText",label:"性别"}}),a("el-table-column",{attrs:{prop:"orgName",label:"机构"}}),a("el-table-column",{attrs:{prop:"stageIdText",label:"阶段"}}),a("el-table-column",{attrs:{prop:"gradeName",label:"年级"}}),a("el-table-column",{attrs:{prop:"className",label:"行政班"}}),a("el-table-column",{attrs:{prop:"typeOfStudyText",label:"就读类型"}}),a("el-table-column",{attrs:{prop:"statusText",label:"状态"}}),a("el-table-column",{attrs:{prop:"id",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.showBtn?a("ul",{staticClass:"tableOpe",on:{mouseleave:function(a){t.handleMouseLeave(e.row)}}},[a("li",[0==e.row.status?a("span",{on:{click:function(a){t.disable(e.row,1)}}},[t._v("停用")]):a("span",{on:{click:function(a){t.disable(e.row,0)}}},[t._v("启用")])]),a("li",[t._v("编辑")])]):a("i",{staticClass:"iconfont icon-more",on:{mouseenter:function(a){t.handleMouseEnter(e.row)}}})]}}])})],1),a("div",{staticClass:"flex-between mt20"},[a("state-switch",{on:{switchL:t.stateList}}),a("paging",{attrs:{pageTotal:t.pageTotal},on:{handleSizeChange:t.SizeChange,handleCurrentChange:t.CurrentChange}})],1),a("div",{staticClass:"stu-yeaer-modal-add"},[a("div",{staticClass:"modalAdd"},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"88px",rules:t.formRules,id:"schoolForm"}},[a("el-form-item",{attrs:{label:"学校",prop:"school"}},[a("div",{on:{click:t.isgow}},[a("el-input",{attrs:{placeholder:"请选择或输入"},on:{click:function(t){t.stopPropagation()}},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[a("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},slot:"suffix"})])],1),t.isshow?a("div",{staticClass:"el-div-tree"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.areaList,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.addIns}})],1):t._e()]),a("el-form-item",{attrs:{label:"班级",prop:"className"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.addForm.className,callback:function(e){t.$set(t.addForm,"className",e)},expression:"addForm.className"}},t._l(t.className,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),a("el-form-item",{attrs:{label:"学号",prop:"student"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.addForm.student,callback:function(e){t.$set(t.addForm,"student",e)},expression:"addForm.student"}})],1),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.addForm.sex,callback:function(e){t.$set(t.addForm,"sex",e)},expression:"addForm.sex"}},t._l(t.sex,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1),a("el-form-item",{attrs:{label:"名族",prop:"national"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.addForm.national,callback:function(e){t.$set(t.addForm,"national",e)},expression:"addForm.national"}},t._l(t.nationData,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1),a("el-form-item",{attrs:{label:"身份证号",prop:"identity"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.addForm.identity,callback:function(e){t.$set(t.addForm,"identity",e)},expression:"addForm.identity"}})],1),a("el-form-item",{attrs:{label:"就读类型",prop:"attType"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.addForm.attType,callback:function(e){t.$set(t.addForm,"attType",e)},expression:"addForm.attType"}},t._l(t.attend,function(t){return a("el-option",{key:t.code,attrs:{label:t.text,value:t.code}})}))],1)],1)],1)])],1)},n=[],i=a("ecb3"),l=i["a"],r=(a("8120"),a("2877")),o=Object(r["a"])(l,s,n,!1,null,null,null);o.options.__file="student.vue";e["default"]=o.exports},"2f454":function(t,e,a){},"4a13":function(t,e,a){},"55a9":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.list.name,placement:"top"}},[a("button",{staticClass:"icon-btn",on:{click:t.btnClick}},[a("i",{staticClass:"iconfont",class:t.list.icon})])])},n=[],i={name:"btnList",props:{model:Object},data:function(){return{list:this.model}},created:function(){},methods:{btnClick:function(){this.$emit("btn-click",this.model.alias)}}},l=i,r=(a("b6d5"),a("2877")),o=Object(r["a"])(l,s,n,!1,null,"18503ae0",null);o.options.__file="btn-list.vue";e["default"]=o.exports},6635:function(t,e,a){"use strict";var s=a("4a13"),n=a.n(s);n.a},"6aa4":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"state-switch"},[a("ul",t._l(t.switchList,function(e,s){return a("li",{key:s,class:t.activeClass==s?"active":"",on:{click:function(a){t.switchState(s,e)}}},[t._v(t._s(e.name))])}))])},n=[],i={name:"state-switch",data:function(){return{switchList:[{name:"启用",state:0},{name:"停用",state:1},{name:"全部",state:""}],activeClass:0}},methods:{switchState:function(t,e){var a=this;a.activeClass=t,a.$emit("switchL",e.state)}}},l=i,r=(a("6635"),a("2877")),o=Object(r["a"])(l,s,n,!1,null,"770013e8",null);o.options.__file="state-switch.vue";e["default"]=o.exports},7064:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paging"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},n=[],i={name:"paging",data:function(){return{currentPage:1}},props:["pageTotal"],created:function(){},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}},l=i,r=(a("8acc"),a("2877")),o=Object(r["a"])(l,s,n,!1,null,"32390cbc",null);o.options.__file="paging.vue";e["default"]=o.exports},"7f7f":function(t,e,a){var s=a("86cc").f,n=Function.prototype,i=/^\s*function ([^ (]*)/,l="name";l in n||a("9e1e")&&s(n,l,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},8120:function(t,e,a){"use strict";var s=a("2f454"),n=a.n(s);n.a},"8acc":function(t,e,a){"use strict";var s=a("b7f9"),n=a.n(s);n.a},ac6a:function(t,e,a){for(var s=a("cadf"),n=a("0d58"),i=a("2aba"),l=a("7726"),r=a("32e9"),o=a("84f2"),c=a("2b4c"),d=c("iterator"),u=c("toStringTag"),m=o.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=n(f),p=0;p<h.length;p++){var g,b=h[p],y=f[b],v=l[b],x=v&&v.prototype;if(x&&(x[d]||r(x,d,m),x[u]||r(x,u,b),o[b]=m,y))for(g in s)x[g]||i(x,g,s[g],!0)}},b6d5:function(t,e,a){"use strict";var s=a("f9e4"),n=a.n(s);n.a},b7f9:function(t,e,a){},ecb3:function(t,e,a){"use strict";(function(t){a("ac6a"),a("7f7f");var s=a("55a9"),n=a("6aa4"),i=a("7064");e["a"]={data:function(){return{btnGroup:[{icon:"icon-add",name:"添加",alias:1},{icon:"icon-input",name:"导出",alias:2},{icon:"icon-permissions",name:"重置密码",alias:3},{icon:"icon-enable",name:"启用",alias:4},{icon:"icon-stop",name:"停用",alias:5}],currentSelect:"成都第X中学",defaultProps:{children:"children",label:"displayName"},filterText:"",areaList:[],formInline:{user:"",sex:null,stage:null,attend:null,learn:null,className:null},isshow:!1,tableData:[],multipleSelection:[],pageSize:10,pageCurrent:1,pageTotal:0,sex:[],stage:[],attend:[],nationData:[],status:0,orgId:"",learn:[],className:[],addForm:{school:"",className:"",student:"",name:"",order:"",sex:"",national:"",identity:"",attType:"",addInsIs:""},formRules:{school:[{required:!0,message:"请选择学校",trigger:"blur"}],className:[{required:!0,message:"请选择班级",trigger:"change"}],student:[{required:!0,message:"请输入学号",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择姓名",trigger:"change"}],national:[{required:!0,message:"请选择名族",trigger:"change"}],identity:[{required:!0,message:"请输入身份证号码",trigger:"blur"}],attType:[{required:!0,message:"请选择就读类型",trigger:"change"}]},seen:!1,current:0,patState:null,disableVal:0}},components:{"btn-list":s["default"],"state-switch":n["default"],paging:i["default"]},created:function(){this.dictionary(),this.studentsList(),this.institutions()},watch:{filterText:function(t){this.$refs.tree.filter(t)}},methods:{dictionary:function(){var t=this,e={type:["sex","stage","study_type","nation"]};this.$api.dictSelect(e).then(function(e){if(1==e.success){var a=0;for(a=0;a<e.data.length;a++)"sex"==e.data[a].type?t.sex=e.data[a].data:"stage"==e.data[a].type?t.stage=e.data[a].data:"study_type"==e.data[a].type?t.attend=e.data[a].data:"nation"==e.data[a].type&&(t.nationData=e.data[a].data)}})},orgQuery:function(){var t=this,e={orgId:this.orgId},a={orgId:this.orgId};this.$api.learnSelect(e).then(function(e){1==e.success&&(t.learn=e.data)}),this.$api.classSelect(a).then(function(e){1==e.success&&(t.className=e.data)})},studentsList:function(){var t=this,e={workId:this.formInline.user,sex:this.formInline.sex,stageId:this.formInline.stage,classId:this.formInline.className,orgId:this.orgId,pageIndex:this.pageCurrent,pageSize:this.pageSize,status:this.status,typeOfStudy:this.formInline.attend,gradeName:this.formInline.learn};this.$api.students(e).then(function(e){if(1==e.success){var a=0;for(a=0;a<e.data.length;a++)e.data[a].showBtn=!1;t.tableData=e.data,t.pageTotal=parseInt(e.totalDatas)}})},institutions:function(){var t=this,e={level:0,onlyOrg:1,parentId:0};this.$api.institutions(e).then(function(e){1==e.success&&(t.areaList=e.data)})},studentAdd:function(){var e=this;e.$refs["addForm"].resetFields(),this.$myLayer.formLayer("添加",t(".stu-yeaer-modal-add"),["422px"],function(){e.$refs["addForm"].validate(function(t){if(!t)return!1;var a={coreClassmembers:{classId:e.addForm.className},orgId:e.orgId,workId:e.addForm.student,userName:e.addForm.name,sex:e.addForm.sex,nationality:e.addForm.national,idCard:e.addForm.identity,typeOfStudy:e.addForm.attType};e.$api.studentsAdd(a).then(function(t){1==t.success?(e.$myLayer.successLayer(t.msg),e.studentsList()):e.$myLayer.errorLayer(t.msg)})})})},disable:function(t,e){var a=this,s={id:t.id,status:e};this.$api.studentsDis(s).then(function(t){1==t.success?(a.$myLayer.successLayer(t.msg),a.studentsList()):a.$myLayer.errorLayer(t.msg)})},stuExport:function(){var t=this,e=[],a=0;for(a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].id);var s={workId:this.formInline.user,sex:this.formInline.sex,stageId:this.formInline.stage,classId:this.formInline.className,orgId:this.orgId,pageIndex:this.pageCurrent,pageSize:this.pageSize,status:this.status,typeOfStudy:this.formInline.attend,gradeName:this.formInline.learn,ids:e};this.$api.batStudentsExport(s).then(function(e){1==e.success?t.$myLayer.successLayer(e.msg):t.$myLayer.errorLayer(e.msg)})},handleMouseEnter:function(t){t.showBtn=!0},handleMouseLeave:function(t){t.showBtn=!1},addIns:function(t){this.filterText=t.displayName,this.orgId=t.id,this.addForm.school=t.id,this.orgQuery(),this.isshow=!1},btnClick:function(t){if(1==t)this.studentAdd();else if(2==t)this.stuExport();else if(3==t)this.resetPassword();else if(4==t){var e=0;this.patState=e,this.batchenable()}else{var a=1;this.patState=a,this.batchenable()}},batchenable:function(){var t=this,e=[],a=0;for(a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].id);var s={status:this.patState,userIds:e};0==e.length?this.$myLayer.errorLayer("至少选择一条数据"):this.$api.batStudentsDis(s).then(function(e){1==e.success?(t.$myLayer.successLayer(e.msg),t.studentsList()):t.$myLayer.errorLayer(e.msg)})},resetPassword:function(){var t=this,e=[],a=0;for(a=0;a<this.multipleSelection.length;a++){var s={userInfoId:this.multipleSelection[a].id};e.push(s)}if(""==e.length)t.$myLayer.errorLayer("至少选择一条数据");else{var n=e;t.$api.batPassword(n).then(function(e){1==e.success&&(t.$myLayer.successLayer(e.msg),t.studentsList())})}},filterNode:function(t,e){return!t||-1!==e.displayName.indexOf(t)},handleSelect:function(t){this.currentSelect=t.displayName,this.orgId=t.id,this.orgQuery(),this.studentsList()},search:function(t){var e=this;1==t?e.studentsList():e.formInline={user:"",sex:"",stage:"",attend:"",learn:"",className:""}},toggleSelection:function(t){var e=this;t?t.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(t){this.multipleSelection=t},stateList:function(t){this.status=t,this.studentsList()},SizeChange:function(t){this.pageSize=t,this.studentsList()},CurrentChange:function(t){this.pageCurrent=t,this.studentsList()},isgow:function(){this.isshow=!this.isshow}}}}).call(this,a("1157"))},f9e4:function(t,e,a){}}]);
//# sourceMappingURL=chunk-8d8130fe.c5edec0c.js.map