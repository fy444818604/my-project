(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bfae362"],{"0bfb":function(e,t,s){"use strict";var n=s("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"11e9":function(e,t,s){var n=s("52a7"),i=s("4630"),o=s("6821"),c=s("6a99"),r=s("69a8"),a=s("c69a"),l=Object.getOwnPropertyDescriptor;t.f=s("9e1e")?l:function(e,t){if(e=o(e),t=c(t,!0),a)try{return l(e,t)}catch(e){}if(r(e,t))return i(!n.f.call(e,t),e[t])}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"3b2b":function(e,t,s){var n=s("7726"),i=s("5dbc"),o=s("86cc").f,c=s("9093").f,r=s("aae3"),a=s("0bfb"),l=n.RegExp,u=l,f=l.prototype,d=/a/g,h=/a/g,v=new l(d)!==d;if(s("9e1e")&&(!v||s("79e5")(function(){return h[s("2b4c")("match")]=!1,l(d)!=d||l(h)==h||"/a/i"!=l(d,"i")}))){l=function(e,t){var s=this instanceof l,n=r(e),o=void 0===t;return!s&&n&&e.constructor===l&&o?e:i(v?new u(n&&!o?e.source:e,t):u((n=e instanceof l)?e.source:e,n&&o?a.call(e):t),s?this:f,l)};for(var p=function(e){e in l||o(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},b=c(u),N=0;b.length>N;)p(b[N++]);f.constructor=l,l.prototype=f,s("2aba")(n,"RegExp",l)}s("7a56")("RegExp")},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"5abb":function(e,t,s){"use strict";var n=s("8e34"),i=s.n(n);i.a},"5dbc":function(e,t,s){var n=s("d3f4"),i=s("8b97").set;e.exports=function(e,t,s){var o,c=t.constructor;return c!==s&&"function"==typeof c&&(o=c.prototype)!==s.prototype&&n(o)&&i&&i(e,o),e}},7333:function(e,t,s){"use strict";var n=s("0d58"),i=s("2621"),o=s("52a7"),c=s("4bf8"),r=s("626a"),a=Object.assign;e.exports=!a||s("79e5")(function(){var e={},t={},s=Symbol(),n="abcdefghijklmnopqrst";return e[s]=7,n.split("").forEach(function(e){t[e]=e}),7!=a({},e)[s]||Object.keys(a({},t)).join("")!=n})?function(e,t){var s=c(e),a=arguments.length,l=1,u=i.f,f=o.f;while(a>l){var d,h=r(arguments[l++]),v=u?n(h).concat(u(h)):n(h),p=v.length,b=0;while(p>b)f.call(h,d=v[b++])&&(s[d]=h[d])}return s}:a},"8b97":function(e,t,s){var n=s("d3f4"),i=s("cb7c"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=s("9b43")(Function.call,s("11e9").f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,s){return o(e,s),t?e.__proto__=s:n(e,s),e}}({},!1):void 0),check:o}},"8e34":function(e,t,s){},9093:function(e,t,s){var n=s("ce10"),i=s("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},aae3:function(e,t,s){var n=s("d3f4"),i=s("2d95"),o=s("2b4c")("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},ade3:function(e,t,s){"use strict";function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",function(){return n})},b8fb:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"edit-res"},[s("div",{staticClass:"main"},[s("div",{staticClass:"video-info"},[s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",[e._v("我的资源")]),s("el-breadcrumb-item",[e._v("编辑知识点")])],1),s("div",{staticClass:"title"},[e._v(e._s(e.resourceInfo.resourceName))]),s("div",{staticClass:"desc"},[e._v(e._s(e.resourceInfo.subjectInfo))]),s("div",{staticClass:"main-video-content-video"},[s("div",{staticClass:"left"},[s("div",{staticClass:"video-wrap"},[s("video",{ref:"videoSource",staticStyle:{width:"100%",height:"100%","object-fit":"cover",outline:"none"},attrs:{controls:"",src:e.resourceInfo.filePath}})]),s("div",{staticClass:"video-control"},[s("div",[s("i",{staticClass:"iconfont icon-eyes"}),e._v(" "+e._s(e.resourceInfo.visitCount)+"\n            ")]),e._m(0),e._m(1)])]),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[e._v("标记"),e.listNotes.length>0?s("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.listNotes.length))]):e._e()]),s("el-scrollbar",{staticStyle:{height:"550px"}},[e.listNotes.length>0?[s("ul",e._l(e.listNotes,function(t){return s("li",{key:t.resourceNoteId},[s("div",{staticClass:"content"},[s("p",[e._v(e._s(t.resourceNoteContext))]),s("p",[e._v(e._s(t.resourceNoteExplain))])]),s("div",{staticClass:"control",on:{mouseleave:function(e){t.show=!1},mouseenter:function(e){t.show=!0}}},[s("i",{staticClass:"iconfont icon-more p-center"}),t.show?s("div",{staticClass:"control-btn"},[s("div",{on:{click:function(s){e.handleEdit(t)}}},[s("i",{staticClass:"iconfont icon-edit p-center"})]),s("div",{on:{click:function(s){e.deleteResourceNoteInfo(t)}}},[s("i",{staticClass:"iconfont icon-del p-center"})])]):e._e()])])}))]:[s("div",{staticStyle:{"text-align":"center","line-height":"100px"}},[e._v("目前暂时没有标记")])]],2)],1)])],1),s("div",{staticClass:"edit-info"},[s("div",{staticClass:"title"},[e._v("编辑标记")]),s("div",{staticClass:"item"},[s("span",[e._v("时间:")]),s("div",{staticClass:"time-dot"},[e._v("\n          "+e._s(e._f("filterTime")(e.tagTime))+"\n          "),s("span",{on:{click:e.handleSelectCurrentTime}},[e._v("选择时间点")])])]),s("div",{staticClass:"item"},[s("span",[e._v("相关知识点:")]),s("div",{staticClass:"know"},[s("div",{staticClass:"add-btn",on:{click:e.handleAddKnowledge}},[e._v("+")]),s("div",{staticClass:"lists"},[e.finnalSelect.pointsName?s("div",{staticClass:"list-item"},[s("p",{staticClass:"p2-overflow"},[e._v(e._s(e.finnalSelect.pointsName))]),s("span",[s("i",{staticClass:"iconfont icon-close",on:{click:e.handleDeleteNotes}})])]):e._e()])])]),s("div",{staticClass:"item"},[s("span",[e._v("说明:")]),s("div",{staticClass:"desc"},[s("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容",resize:"none"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1)]),s("div",{staticClass:"sub-btn item"},[s("span"),s("div",{on:{click:e.saveResourceNoteInfo}},[e._v("提交")])])])]),s("res-footer"),s("div",{staticClass:"add-knowledge-wrap"},[s("el-scrollbar",[s("div",{staticClass:"add-knowledge-content"},[s("div",{staticClass:"related"},[s("div",{staticClass:"title"},[e._v("相关知识点")]),s("div",{staticClass:"related-lists"},e._l(e.relatedNotes,function(t){return s("resKnowledgeBox",{key:t.id,class:{active:e.selectNotes.id===t.id},attrs:{info:t},nativeOn:{click:function(s){e.handleSelectNote(t)}}})}))]),s("div",{staticClass:"search"},[s("div",{staticClass:"title"},[e._v("搜索知识点")]),s("div",{staticClass:"search-box"},[s("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.searchNoteValue,callback:function(t){e.searchNoteValue=t},expression:"searchNoteValue"}},[s("i",{staticClass:"el-input__icon el-icon-search",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.handleSearch},slot:"suffix"})])],1),s("div",{staticClass:"search-lists"},e._l(e.searchNotes,function(t){return s("resKnowledgeBox",{key:t.id,class:{active:e.selectNotes.id===t.id},attrs:{info:t},nativeOn:{click:function(s){e.handleSelectNote(t)}}})}))])])])],1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("i",{staticClass:"iconfont icon-arrow-1"}),e._v(" 下载\n            ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("i",{staticClass:"iconfont icon-share"}),e._v(" 分享\n            ")])}],o=s("f04c"),c=o["a"],r=(s("5abb"),s("2877")),a=Object(r["a"])(c,n,i,!1,null,"44fa94cc",null);a.options.__file="edit-res.vue";t["default"]=a.exports},be94:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s("ade3");function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},i=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),i.forEach(function(t){Object(n["a"])(e,t,s[t])})}return e}},f04c:function(e,t,s){"use strict";(function(e){var n=s("be94"),i=(s("f751"),s("cadf"),s("551c"),s("097d"),s("f1c5"));t["a"]={props:["id"],components:{resFooter:function(){return s.e("chunk-db84157e").then(s.bind(null,"0d5c"))},resKnowledgeBox:function(){return s.e("chunk-32efec83").then(s.bind(null,"9e28"))}},data:function(){return{resourceNoteId:"",textarea:"",searchNoteValue:"",tagTime:"0",resourceInfo:{},listNotes:[],relatedNotes:[],searchNotes:[],selectNotes:{id:"",pointsName:""},finnalSelect:{id:"",pointsName:""}}},created:function(){console.log(this.id),this.getResourceDetail(),this.handleSearch()},filters:{filterTime:function(e){return Object(i["b"])(e)}},methods:{getResourceDetail:function(){var e=this;this.$api.getResourceDetailByFile(this.id).then(function(t){e.resourceInfo=t.data,e.selectRelevantCoreResourceNote(),e.listNotesByResourceId()})},selectRelevantCoreResourceNote:function(){var e=this;this.$api.selectRelevantCoreResourceNote(this.resourceInfo.resourceId).then(function(t){e.relatedNotes=t.data})},listNotesByResourceId:function(){var e=this;this.$api.listNotesByResourceId(this.resourceInfo.resourceId).then(function(t){e.listNotes=t.data.map(function(e){return Object.assign(e,{show:!1})})})},handleEdit:function(e){this.finnalSelect.pointsName=e.resourceNoteContext,this.finnalSelect.id=e.resourceNoteId,this.textarea=e.resourceNoteExplain,this.resourceNoteId=e.resourceNoteId,this.tagTime=e.resourceNoteTime},deleteResourceNoteInfo:function(e){var t=this;this.$myLayer.confirmLayer("确定删除当前知识点",function(){t.$api.deleteResourceNoteInfo(e.resourceNoteId).then(function(e){t.listNotesByResourceId()})})},handleSearch:function(){var e=this;this.$api.selectCoreResourceNote(this.searchNoteValue).then(function(t){e.searchNotes=t.data})},handleSelectNote:function(e){this.selectNotes=Object(n["a"])({},e)},handleDeleteNotes:function(){this.selectNotes.id="",this.selectNotes.pointsName="",this.finnalSelect.id="",this.finnalSelect.pointsName=""},handleAddKnowledge:function(){var t=this;this.$myLayer.formLayer("添加知识点",e(".add-knowledge-wrap"),["960px","577px"],function(){t.selectNotes.id&&(t.finnalSelect=Object(n["a"])({},t.selectNotes))})},reset:function(){this.resourceNoteId="",this.tagTime=0,this.textarea="",this.handleDeleteNotes()},saveResourceNoteInfo:function(){var e=this;if(!this.finnalSelect.id)return this.$myLayer.dangerLayer("请添加相关知识点");var t={context:this.finnalSelect.pointsName,explain:this.textarea,resourceId:this.resourceInfo.resourceId,time:this.tagTime};this.resourceNoteId?(t.resourceNoteId=this.resourceNoteId,this.$api.updateResourceNoteInfo(t).then(function(t){e.listNotesByResourceId(),e.$myLayer.successLayer("更新成功")})):this.$api.saveResourceNoteInfo(t).then(function(t){e.listNotesByResourceId(),e.$myLayer.successLayer("添加成功")}),this.reset()},handleSelectCurrentTime:function(){var e=this.$refs.videoSource.currentTime;this.tagTime=e}}}}).call(this,s("1157"))},f1c5:function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"a",function(){return i});s("3b2b"),s("a481");function n(e){var t=parseInt(e),s=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),i=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60);return t="".concat(s,":").concat(n,":").concat(i),t}var i=function(e,t){var s=e||new Date,n={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),s:s.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return t}},f751:function(e,t,s){var n=s("5ca1");n(n.S+n.F,"Object",{assign:s("7333")})}}]);
//# sourceMappingURL=chunk-3bfae362.c4c7ae21.js.map