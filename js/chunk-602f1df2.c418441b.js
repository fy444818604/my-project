(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-602f1df2"],{"1d13":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"area"},[n("base-title",{attrs:{title:"建筑场所"}},[n("template",{slot:"filterTree"},[n("slelct-Tree",{staticStyle:{"margin-left":"15px"},attrs:{rootId:e.rootId},on:{"node-select":e.orgSelect}})],1),n("template",{slot:"btn"},[n("btn-list",{attrs:{model:{icon:"icon-add",name:"添加"}},on:{"btn-click":e.handleAdd}})],1)],2),n("div",{staticClass:"area-content"},[n("base-table",{attrs:{tableData:e.tableData,tableColumn:e.tableColumn},on:{"on-stop":e.handleStop,"on-edit":e.handleEdit}})],1),n("div",{staticClass:"area-footer"},[n("state-switch",{on:{switchL:e.handleSwicthState}}),n("page",{attrs:{pageTotal:e.pageTotal},on:{handleSizeChange:e.SizeChange,handleCurrentChange:e.CurrentChange}})],1),n("div",{staticClass:"build-area-mdoal"},[n("el-form",{ref:"formInfo",staticStyle:{width:"330px",margin:"24px auto"},attrs:{model:e.formInfo,"label-width":"80px",rules:e.formRules}},[n("el-form-item",{attrs:{label:"机构",prop:"orgId"}},[n("org-Select",{attrs:{rootId:e.orgId,initText:e.orgSelectText,refreshText:e.refreshText},on:{"node-select":e.handleOrgSelect}})],1),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{model:{value:e.formInfo.name,callback:function(t){e.$set(e.formInfo,"name",t)},expression:"formInfo.name"}})],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.campusDiv,expression:"campusDiv"}],attrs:{label:"所属校区"}},[n("el-input",{attrs:{placeholder:"输入关键字进行过滤"},on:{focus:function(t){e.isShowT()}},model:{value:e.formInfo.campusId,callback:function(t){e.$set(e.formInfo,"campusId",t)},expression:"formInfo.campusId"}},[n("i",{staticClass:"iconfont icon-school",attrs:{slot:"suffix"},on:{click:function(t){e.isShow(!e.campusShow)}},slot:"suffix"})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.campusShow,expression:"campusShow"}],staticClass:"campusId"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.campusData,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)],1),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:e.formInfo.description,callback:function(t){e.$set(e.formInfo,"description",t)},expression:"formInfo.description"}})],1),n("el-form-item",{attrs:{label:"显示顺序"}},[n("el-input",{model:{value:e.formInfo.orderIndex,callback:function(t){e.$set(e.formInfo,"orderIndex",t)},expression:"formInfo.orderIndex"}})],1)],1)],1)],1)},a=[],o=n("3203"),s=o["a"],i=(n("f663"),n("2877")),c=Object(i["a"])(s,r,a,!1,null,"3385b200",null);c.options.__file="build-area.vue";t["default"]=c.exports},2621:function(e,t){t.f=Object.getOwnPropertySymbols},3203:function(e,t,n){"use strict";(function(e){n("7f7f"),n("f751"),n("9200");t["a"]={components:{stateSwitch:function(){return n.e("chunk-5869f344").then(n.bind(null,"6aa4"))},baseTable:function(){return n.e("chunk-1981a51b").then(n.bind(null,"1ea4"))},slelctTree:function(){return n.e("chunk-a96c57ba").then(n.bind(null,"ca1f"))},orgSelect:function(){return n.e("chunk-264358d7").then(n.bind(null,"07b8"))},baseTitle:function(){return n.e("chunk-8461d7c0").then(n.bind(null,"6968"))},btnList:function(){return n.e("chunk-39930572").then(n.bind(null,"55a9"))},page:function(){return n.e("chunk-66786a86").then(n.bind(null,"7064"))}},data:function(){var e=[{prop:"orderIndex",label:"显示顺序"},{prop:"name",label:"名称"},{prop:"orgName",label:"所属机构"},{prop:"campusName",label:"校区"},{prop:"description",label:"描述"},{prop:"statusText",label:"状态"}];return{defaultProps:{children:"children",label:"displayName"},campusShow:!1,campusDiv:!0,campusId:"",campusData:[],rootId:"0",tableData:[],pageSize:10,pageCurrent:1,pageTotal:0,tableColumn:e,status:0,orgSelectText:"",refreshText:!1,orgId:"0",formInfo:{orgId:"",campusId:"",name:"",orderIndex:"",description:""},formRules:{orgId:[{required:!0,message:"请选择机构",trigger:"blur"}],name:[{required:!0,message:"请输入名称",trigger:"blur"}]}}},created:function(){this.areasList()},methods:{handleOrgSelect:function(e,t){this.$refs["formInfo"].resetFields(),this.campusId="",this.formInfo.campusId="",this.orgId=e.id,this.formInfo.orgId=e.id,this.insSelect(),t(!0)},insSelect:function(){var e=this,t={schoolOrgId:this.orgId};this.$api.insSelect(t).then(function(t){1==t.success&&(""==t.data?e.campusDiv=!1:(e.campusData=t.data,e.campusDiv=!0))})},isShow:function(){this.campusShow=!this.campusShow},isShowT:function(){this.campusShow=!0},handleNodeClick:function(e){this.campusId=e.id,this.formInfo.campusId=e.displayName,this.campusShow=!1},areasList:function(){var e=this,t={pageIndex:this.pageCurrent,pageSize:this.pageSize,status:this.status,orgId:this.rootId};this.$api.areaList(t).then(function(t){if(1==t.success){e.pageTotal=parseInt(t.totalDatas);var n=[],r=t.data;r.map(function(e,t){n.push(Object.assign({index:t+1},e,{indexNum:"str"}))}),e.tableData=n}else e.$myLayer.errorLayer("失败")})},SizeChange:function(e){this.pageSize=e,this.areasList()},CurrentChange:function(e){this.pageCurrent=e,this.areasList()},orgSelect:function(e){this.rootId=e.id,this.areasList()},handleStop:function(e){var t=this,n=this;0!=e.status?n.enable=0:n.enable=1;var r={id:e.id,status:n.enable};this.$api.areaDis(r).then(function(e){1==e.success?(n.areasList(),t.$myLayer.successLayer(e.msg)):t.$myLayer.errorLayer(e.msg)})},handleEdit:function(t){var n=this;n.orgId=t.row.orgId,n.orgSelectText=t.row.orgName,this.formInfo.orgId=t.row.orgId,n.refreshText=!n.refreshText,n.insSelect(),this.campusId=t.row.campusId,this.formInfo.campusId=t.row.campusName,n.formInfo.name=t.row.name,n.formInfo.description=t.row.description,n.formInfo.orderIndex=t.row.orderIndex,this.$myLayer.formLayer("编辑",e(".build-area-mdoal"),["422px"],function(){n.$refs["formInfo"].validate(function(e){if(!e)return!1;var r={id:t.row.id,name:n.formInfo.name,campusId:n.campusId,orderIndex:n.formInfo.orderIndex,orgId:n.orgId,description:n.formInfo.description};n.$api.areaEdi(r).then(function(e){1==e.success?(n.areasList(),n.$myLayer.successLayer(e.msg)):n.$myLayer.errorLayer(e.msg)})})})},handleSwicthState:function(e){this.status=e,this.areasList()},handleAdd:function(){var t=this;t.orgId="",t.orgSelectText="",t.formInfo.orgId="",t.formInfo.name="",t.formInfo.description="",t.formInfo.orderIndex="",t.refreshText=!t.refreshText,t.$refs["formInfo"].resetFields(),this.$myLayer.formLayer("新建",e(".build-area-mdoal"),["422px"],function(){t.$refs["formInfo"].validate(function(e){if(!e)return!1;var n={name:t.formInfo.name,campusId:t.campusId,orderIndex:t.formInfo.orderIndex,orgId:t.orgId,description:t.formInfo.description};t.$api.areaAdd(n).then(function(e){1==e.success?(t.areasList(),t.$myLayer.successLayer(e.msg)):t.$myLayer.errorLayer(e.msg)})})})}}}}).call(this,n("1157"))},"52a7":function(e,t){t.f={}.propertyIsEnumerable},7333:function(e,t,n){"use strict";var r=n("0d58"),a=n("2621"),o=n("52a7"),s=n("4bf8"),i=n("626a"),c=Object.assign;e.exports=!c||n("79e5")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){var n=s(e),c=arguments.length,u=1,f=a.f,l=o.f;while(c>u){var d,m=i(arguments[u++]),h=f?r(m).concat(f(m)):r(m),p=h.length,I=0;while(p>I)l.call(m,d=h[I++])&&(n[d]=m[d])}return n}:c},"7f7f":function(e,t,n){var r=n("86cc").f,a=Function.prototype,o=/^\s*function ([^ (]*)/,s="name";s in a||n("9e1e")&&r(a,s,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},9200:function(e,t,n){"use strict";function r(e){return 1===e||"1"===e}function a(e){return 2===e||"2"===e}function o(e){return 4===e||"4"===e}function s(e){return 8===e||"8"===e}function i(e){return 16===e||"16"===e}function c(e){return 32===e||"32"===e}function u(e){return r(e)||a(e)||o(e)||s(e)}n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"f",function(){return s}),n.d(t,"g",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"e",function(){return u})},f48e:function(e,t,n){},f663:function(e,t,n){"use strict";var r=n("f48e"),a=n.n(r);a.a},f751:function(e,t,n){var r=n("5ca1");r(r.S+r.F,"Object",{assign:n("7333")})}}]);
//# sourceMappingURL=chunk-602f1df2.c418441b.js.map