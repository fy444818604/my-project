(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1704c0b1","chunk-39930572","chunk-66786a86","chunk-5869f344","chunk-1981a51b","chunk-70c19e5c"],{"1ea4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{staticClass:"base-table",staticStyle:{width:"100%"},attrs:{data:t.customData,stripe:t.stripe}},[t.showSelect?n("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._l(t.tableColumn,function(t){return n("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align,"empty-text":"暂无数据"}})}),n("el-table-column",{attrs:{align:"center",width:"60",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"tableColumn-control"},[e.row.showBtn?n("div",{class:{single:t.single},on:{mouseleave:function(n){t.handleMouseLeave(e.row)}}},[t.single?t._e():n("span",{on:{click:function(n){t.handleStop(e.row)}}},[0==e.row.status?n("a",[t._v("停用")]):n("a",[t._v("启用")])]),n("span",{on:{click:function(n){t.handleEdit(e)}}},[t._v("编辑")])]):n("i",{staticClass:"iconfont icon-more",on:{mouseenter:function(n){t.handleMouseEnter(e.row)}}})])]}}])})],2)},s=[],i=n("2909"),o=(n("f751"),{props:{tableData:{type:Array,required:!0},tableColumn:{type:Array,required:!0},stripe:{type:Boolean,default:!0},showSelect:Boolean,single:Boolean},data:function(){return{customData:[]}},watch:{tableData:{handler:function(t){this.initTable(t)},immediate:!0}},methods:{initTable:function(t){var e=t.map(function(t){return Object.assign({},t,{showBtn:!1})});this.customData=Object(i["a"])(e)},handleMouseEnter:function(t){t.showBtn=!0,this.customData=Object(i["a"])(this.customData)},handleMouseLeave:function(t){t.showBtn=!1,this.customData=Object(i["a"])(this.customData)},handleStop:function(t){this.$emit("on-stop",t)},handleEdit:function(t){this.$emit("on-edit",t)}}}),r=o,l=(n("fb16"),n("5727"),n("2877")),c=Object(l["a"])(r,a,s,!1,null,"51fcacb2",null);c.options.__file="table.vue";e["default"]=c.exports},2621:function(t,e){e.f=Object.getOwnPropertySymbols},2909:function(t,e,n){"use strict";function a(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(t){return a(t)||s(t)||i()}n.d(e,"a",function(){return o})},"307b":function(t,e,n){"use strict";var a=n("a309"),s=n.n(a);s.a},4688:function(t,e,n){"use strict";(function(t){n("7f7f"),n("f751");var a=n("1ea4"),s=n("6aa4"),i=n("7064"),o=n("55a9");e["a"]={name:"schoolDistrict",data:function(){return{pageTile:"学区管理",pageSize:10,pageCurrent:1,pageTotal:0,status:0,enable:null,defaultProps:{children:"children",label:"displayName"},tableData:[],tableColumn:[{prop:"orderIndex",label:"显示顺序"},{prop:"name",label:"学区名称"},{prop:"orgName",label:"组织结构"},{prop:"description",label:"描述"},{prop:"statusText",label:"状态"}],schoolForm:{name:"",id:"",orderIndex:"",orgId:"",description:"",institutions:""},formRules:{name:[{required:!0,message:"请输入学区名称",trigger:"blur"}],institutions:[{required:!0,message:"请选择组织结构",trigger:"blur"}]},formInline:{},labelData:"",structureBnt:!1,queryStruct:!1,filterText:"",queryFilterText:"",orgId:"",queryOrgId:""}},components:{"school-table":a["default"],"school-stateSwitch":s["default"],"school-paging":i["default"],"bnt-list":o["default"]},created:function(){this.schoolList(),this.institutions()},watch:{filterText:function(t){this.$refs.tree&&this.$refs.tree.filter(t)},queryFilterText:function(t){t&&this.$refs.tree.filter(t)}},methods:{filterNode:function(t,e){return!t||-1!==e.displayName.indexOf(t)},schoolList:function(){var t=this,e={pageIndex:this.pageCurrent,pageSize:this.pageSize,orgId:this.queryOrgId,status:this.status};this.$api.school(e).then(function(e){if(1==e.success){t.pageTotal=parseInt(e.totalDatas);var n=[],a=e.data;a.map(function(t,e){n.push(Object.assign({index:e+1},t,{indexNum:"str"}))}),t.tableData=n}else t.$myLayer.errorLayer("失败")})},enableIf:function(){0!=this.enable?this.enable=0:this.enable=1},schoolStop:function(t){var e=this,n=this;n.enable=t.status,n.enableIf();var a={id:t.id,status:n.enable};this.$api.schoolDis(a).then(function(t){1==t.success?(n.schoolList(),e.$myLayer.successLayer(t.msg)):e.$myLayer.errorLayer(t.msg)})},schoolEdit:function(e){this.filterText=e.row.orgName;var n={name:e.row.name,describe:e.row.description,orderIndex:e.row.orderIndex};this.schoolForm=n;var a=this;this.$myLayer.formLayer("编辑",t(".stu-yeaer-modal-add"),["422px"],function(){var t={name:a.schoolForm.name,id:e.row.id,orderIndex:a.schoolForm.orderIndex,orgId:a.orgId,description:a.schoolForm.describe};a.$api.schoolEdi(t).then(function(t){1==t.success?(a.schoolList(),a.$myLayer.successLayer(t.msg)):a.$myLayer.errorLayer(t.msg)})})},schoolSwitch:function(t){this.status=t,this.schoolList()},SizeChange:function(t){this.pageSize=t,this.schoolList()},CurrentChange:function(t){this.pageCurrent=t,this.schoolList()},schoolAdd:function(){var e=this;e.$refs["schoolForm"].resetFields(),e.filterText="",this.$myLayer.formLayer("新建",t(".stu-yeaer-modal-add"),["422px"],function(){e.$refs["schoolForm"].validate(function(t){if(!t)return!1;var n={name:e.schoolForm.name,description:e.schoolForm.describe,orderIndex:e.schoolForm.order,orgId:e.orgId};e.$api.schoolAdd(n).then(function(t){1==t.success?(e.schoolList(),e.$myLayer.successLayer(t.msg)):e.$myLayer.errorLayer(t.msg)})})})},structureTop:function(){this.structureBnt=!this.structureBnt},queryStructureTop:function(){this.queryStruct=!this.queryStruct},institutions:function(){var t=this,e={level:0,onlyOrg:1,parentId:0};this.$api.institutions(e).then(function(e){1==e.success&&(t.labelData=e.data)})},addIns:function(t){this.filterText=t.displayName,this.orgId=t.id,this.schoolForm.institutions=t.id,this.structureBnt=!1},queryAddIns:function(t){this.queryFilterText=t.displayName,this.queryOrgId=t.id,this.queryStruct=!1},search:function(t){1==t?this.schoolList():(this.queryFilterText="",this.queryOrgId="")}}}}).call(this,n("1157"))},"4a13":function(t,e,n){},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"55a9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.list.name,placement:"top"}},[n("button",{staticClass:"icon-btn",on:{click:t.btnClick}},[n("i",{staticClass:"iconfont",class:t.list.icon})])])},s=[],i={name:"btnList",props:{model:Object},data:function(){return{list:this.model}},created:function(){},methods:{btnClick:function(){this.$emit("btn-click",this.model.alias)}}},o=i,r=(n("b6d5"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"18503ae0",null);l.options.__file="btn-list.vue";e["default"]=l.exports},5727:function(t,e,n){"use strict";var a=n("fd9d"),s=n.n(a);s.a},6635:function(t,e,n){"use strict";var a=n("4a13"),s=n.n(a);s.a},"6aa4":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"state-switch"},[n("ul",t._l(t.switchList,function(e,a){return n("li",{key:a,class:t.activeClass==a?"active":"",on:{click:function(n){t.switchState(a,e)}}},[t._v(t._s(e.name))])}))])},s=[],i={name:"state-switch",data:function(){return{switchList:[{name:"启用",state:0},{name:"停用",state:1},{name:"全部",state:""}],activeClass:0}},methods:{switchState:function(t,e){var n=this;n.activeClass=t,n.$emit("switchL",e.state)}}},o=i,r=(n("6635"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"770013e8",null);l.options.__file="state-switch.vue";e["default"]=l.exports},7064:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"paging"},[n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.pageTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])},s=[],i={name:"paging",data:function(){return{currentPage:1}},props:["pageTotal"],created:function(){},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}},o=i,r=(n("8acc"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"32390cbc",null);l.options.__file="paging.vue";e["default"]=l.exports},7333:function(t,e,n){"use strict";var a=n("0d58"),s=n("2621"),i=n("52a7"),o=n("4bf8"),r=n("626a"),l=Object.assign;t.exports=!l||n("79e5")(function(){var t={},e={},n=Symbol(),a="abcdefghijklmnopqrst";return t[n]=7,a.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=a})?function(t,e){var n=o(t),l=arguments.length,c=1,u=s.f,d=i.f;while(l>c){var h,f=r(arguments[c++]),p=u?a(f).concat(u(f)):a(f),m=p.length,b=0;while(m>b)d.call(f,h=p[b++])&&(n[h]=f[h])}return n}:l},"7f7f":function(t,e,n){var a=n("86cc").f,s=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in s||n("9e1e")&&a(s,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"8acc":function(t,e,n){"use strict";var a=n("b7f9"),s=n.n(a);s.a},a309:function(t,e,n){},b6d5:function(t,e,n){"use strict";var a=n("f9e4"),s=n.n(a);s.a},b7f9:function(t,e,n){},cb80:function(t,e,n){},ed34:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-template"},[n("el-row",{staticClass:"school-title"},[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple cha-title"},[t._v(t._s(t.pageTile))])]),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("bnt-list",{attrs:{model:{icon:"icon-add",name:"添加"}},on:{"btn-click":t.schoolAdd}})],1)])],1),n("div",{staticClass:"school-form"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[n("el-form-item",{attrs:{label:"组织结构",prop:"institutions"}},[n("div",{on:{click:t.queryStructureTop}},[n("el-input",{attrs:{placeholder:"请选择或输入"},on:{click:function(t){t.stopPropagation()}},model:{value:t.queryFilterText,callback:function(e){t.queryFilterText=e},expression:"queryFilterText"}},[n("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},slot:"suffix"})])],1),t.queryStruct?n("div",{staticClass:"el-div-tree"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.labelData,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.queryAddIns}})],1):t._e()]),n("el-form-item",[n("button",{staticClass:"primary-btn",on:{click:function(e){t.search(1)}}},[t._v("查询")]),n("button",{staticClass:"clear-btn",on:{click:function(e){t.search(2)}}},[t._v("清空")])])],1)],1),n("div",{staticClass:"school-table"},[n("school-table",{attrs:{tableData:t.tableData,tableColumn:t.tableColumn},on:{"on-stop":t.schoolStop,"on-edit":t.schoolEdit}})],1),n("el-row",{staticClass:"school-bnt"},[n("el-col",{attrs:{span:5}},[n("div",{staticClass:"grid-content bg-purple cha-title"},[n("school-stateSwitch",{on:{switchL:t.schoolSwitch}})],1)]),n("el-col",{attrs:{span:19}},[n("div",{staticClass:"grid-content bg-purple-light"},[n("school-paging",{attrs:{pageTotal:t.pageTotal},on:{handleSizeChange:t.SizeChange,handleCurrentChange:t.CurrentChange}})],1)])],1),n("div",{staticClass:"stu-yeaer-modal-add"},[n("div",{staticClass:"modalAdd"},[n("el-form",{ref:"schoolForm",attrs:{model:t.schoolForm,"label-width":"88px",rules:t.formRules}},[n("el-form-item",{attrs:{label:"学区名称",prop:"name"}},[n("el-input",{model:{value:t.schoolForm.name,callback:function(e){t.$set(t.schoolForm,"name",e)},expression:"schoolForm.name"}})],1),n("el-form-item",{attrs:{label:"组织结构",prop:"institutions"}},[n("div",{on:{click:t.structureTop}},[n("el-input",{attrs:{placeholder:"请选择或输入"},on:{click:function(t){t.stopPropagation()}},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}},[n("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},slot:"suffix"})])],1),t.structureBnt?n("div",{staticClass:"el-div-tree"},[n("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.labelData,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.addIns}})],1):t._e()]),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{model:{value:t.schoolForm.describe,callback:function(e){t.$set(t.schoolForm,"describe",e)},expression:"schoolForm.describe"}})],1),n("el-form-item",{attrs:{label:"显示顺序"}},[n("el-input",{model:{value:t.schoolForm.orderIndex,callback:function(e){t.$set(t.schoolForm,"orderIndex",e)},expression:"schoolForm.orderIndex"}})],1)],1)],1)])],1)},s=[],i=n("4688"),o=i["a"],r=(n("307b"),n("2877")),l=Object(r["a"])(o,a,s,!1,null,"573e03ae",null);l.options.__file="school-district.vue";e["default"]=l.exports},f751:function(t,e,n){var a=n("5ca1");a(a.S+a.F,"Object",{assign:n("7333")})},f9e4:function(t,e,n){},fb16:function(t,e,n){"use strict";var a=n("cb80"),s=n.n(a);s.a},fd9d:function(t,e,n){}}]);
//# sourceMappingURL=chunk-1704c0b1.07f1e9a0.js.map