(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e3f1a5ac"],{"01f0":function(t,e,a){"use strict";var n=a("6a83"),r=a.n(n);r.a},"6a83":function(t,e,a){},"7eca":function(t,e,a){"use strict";(function(t){a("7f7f");e["a"]={components:{btnList:function(){return a.e("chunk-39930572").then(a.bind(null,"55a9"))},baseTitle:function(){return a.e("chunk-8461d7c0").then(a.bind(null,"6968"))},page:function(){return a.e("chunk-66786a86").then(a.bind(null,"7064"))},orgSelect:function(){return a.e("chunk-b8cd8812").then(a.bind(null,"07b8"))}},data:function(){return{tableData:[],pageIndex:1,pageSize:10,pageTotal:0,tableList:[],queryFilterText:"",labelData:[],queryStruct:!1,defaultProps:{children:"children",label:"displayName"},formInline:{queryFilterText:""},rootId:"0",orgIdPa:null,orgSelectText:"",refreshText:!1,addForm:{orgId:"",name:"",describe:"",orderIndex:"",identification:""},formRules:{orgId:[{required:!0,message:"请选择组织结构",trigger:"blur"}],name:[{required:!0,message:"请输入",trigger:"blur"}],identification:[{required:!0,message:"请输入",trigger:"blur"}]}}},created:function(){this.institutions(),this.dataList()},methods:{filterNode:function(t,e){return!t||-1!==e.displayName.indexOf(t)},handleSelectionChange:function(t){this.tableList=t},dataList:function(){var t=this,e={pageIndex:1,pageSize:10,orgId:this.queryFilterText};this.$api.rolePag(e).then(function(e){1==e.success&&(t.tableData=e.data)})},institutions:function(){var t=this,e={level:0,onlyOrg:1,parentId:0};this.$api.institutions(e).then(function(e){1==e.success&&(t.pageTotal=e.data.length,t.labelData=e.data)})},queryAddIns:function(t){this.queryFilterText=t.id,this.formInline.queryFilterText=t.displayName,this.queryStruct=!1},structureTop:function(){this.queryStruct=!this.queryStruct},instBlur:function(){this.queryStruct=!1},query:function(t){1==t?this.dataList():(this.queryFilterText="",this.formInline.queryFilterText="")},SizeChange:function(t){this.pageSize=t,this.dataList()},CurrentChange:function(t){this.pageIndex=t,this.dataList()},batDelete:function(){var t=this;if(0!=t.tableList.length){var e=[],a=0;for(a=0;a<t.tableList.length;a++)e.push(t.tableList[a].id);t.$myLayer.confirmLayer("确定删除吗？",function(){t.$api.rolePatDell(e).then(function(e){1==e.success&&(t.$myLayer.successLayer(e.msg),t.dataList())})})}else t.$myLayer.errorLayer("至少选择一条数据")},add:function(){var e=this;e.$myLayer.formLayer("添加",t(".stu-yeaer-modal-add"),["422px"],function(){e.$refs["addForm"].validate(function(t){if(!t)return!1;var a={orgId:e.orgIdPa,name:e.addForm.identification,displayName:e.addForm.name,notes:e.addForm.describe,orderIndex:e.addForm.orderIndex};e.$api.rolePatAdd(a).then(function(t){1==t.success&&(e.$myLayer.successLayer(t.msg),e.dataList())})})})},handleOrgSelect:function(t,e){this.orgIdPa=t.id,this.addForm.orgId=t.id,e(!0)}}}}).call(this,a("1157"))},"7f7f":function(t,e,a){var n=a("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,l="name";l in r||a("9e1e")&&n(r,l,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(t){return""}}})},"7fee":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"role"},[a("base-title",{attrs:{border:"",title:"角色设置"}},[a("template",{slot:"btn"},[a("btn-list",{attrs:{model:{icon:"icon-add",name:"添加"}},on:{"btn-click":t.add}}),a("btn-list",{attrs:{model:{icon:"icon-del",name:"删除"}},on:{"btn-click":t.batDelete}})],1)],2),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formInline}},[a("el-form-item",{attrs:{label:"组织结构",prop:"institutions"}},[a("div",{on:{click:t.structureTop}},[a("el-input",{attrs:{placeholder:"请选择或输入"},on:{blur:t.instBlur,click:function(t){t.stopPropagation()}},model:{value:t.formInline.queryFilterText,callback:function(e){t.$set(t.formInline,"queryFilterText",e)},expression:"formInline.queryFilterText"}},[a("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},slot:"suffix"})])],1),t.queryStruct?a("div",{staticClass:"el-div-tree"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.labelData,props:t.defaultProps,"default-expand-all":"","filter-node-method":t.filterNode},on:{"node-click":t.queryAddIns}})],1):t._e()]),a("el-button",{staticClass:"sear-btn",on:{click:function(e){t.query(1)}}},[t._v("查询")]),a("el-button",{staticClass:"clear-btn",attrs:{type:"text"},on:{click:function(e){t.query(2)}}},[t._v("清空")])],1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"orderIndex",label:"显示顺序"}}),a("el-table-column",{attrs:{label:"角色名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/authorization/Layout/role-man-detail",query:{id:e.row.id}}}},[t._v("\n\t\t\t\t\t"+t._s(e.row.displayName)+"\n\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{prop:"orgName",label:"机构"}}),a("el-table-column",{attrs:{prop:"notes",label:"描述"}}),a("el-table-column",{attrs:{prop:"memberCount",label:"成员数"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:""}},[t._v("\n\t\t\t\t\t\t"+t._s(e.row.number)+"\n\t\t\t\t\t")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"60"}},[t._v("\n\t\t\t\t1\n\t\t\t")])],1)],1),a("div",{staticClass:"footer"},[a("page",{staticClass:"page",attrs:{pageTotal:t.pageTotal},on:{handleSizeChange:t.SizeChange,handleCurrentChange:t.CurrentChange}})],1),a("div",{staticClass:"stu-yeaer-modal-add"},[a("div",{staticClass:"modalAdd"},[a("el-form",{ref:"addForm",attrs:{model:t.addForm,"label-width":"88px",rules:t.formRules}},[a("el-form-item",{attrs:{label:"机构",prop:"orgId"}},[a("org-select",{attrs:{rootId:t.rootId,initText:t.orgSelectText,refreshText:t.refreshText},on:{"node-select":t.handleOrgSelect}})],1),a("el-form-item",{attrs:{label:"角色名称",prop:"name"}},[a("el-input",{model:{value:t.addForm.name,callback:function(e){t.$set(t.addForm,"name",e)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"标识",prop:"identification"}},[a("el-input",{model:{value:t.addForm.identification,callback:function(e){t.$set(t.addForm,"identification",e)},expression:"addForm.identification"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{model:{value:t.addForm.describe,callback:function(e){t.$set(t.addForm,"describe",e)},expression:"addForm.describe"}})],1),a("el-form-item",{attrs:{label:"显示顺序"}},[a("el-input",{model:{value:t.addForm.orderIndex,callback:function(e){t.$set(t.addForm,"orderIndex",e)},expression:"addForm.orderIndex"}})],1)],1)],1)])],1)},r=[],i=a("7eca"),l=i["a"],o=(a("01f0"),a("2877")),s=Object(o["a"])(l,n,r,!1,null,"62bde425",null);s.options.__file="index.vue";e["default"]=s.exports}}]);
//# sourceMappingURL=chunk-e3f1a5ac.a86336a7.js.map