(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b55069","chunk-39930572"],{"0a49":function(e,t,a){var o=a("9b43"),i=a("626a"),s=a("4bf8"),r=a("9def"),l=a("cd1c");e.exports=function(e,t){var a=1==e,n=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d,h=t||l;return function(t,l,p){for(var v,f,b=s(t),g=i(b),w=o(l,p,3),k=r(g.length),F=0,x=a?h(t,k):n?h(t,0):void 0;k>F;F++)if((m||F in g)&&(v=g[F],f=w(v,F,b),e))if(a)x[F]=f;else if(f)switch(e){case 3:return!0;case 5:return v;case 6:return F;case 2:x.push(v)}else if(u)return!1;return d?-1:c||u?u:x}}},1169:function(e,t,a){var o=a("2d95");e.exports=Array.isArray||function(e){return"Array"==o(e)}},1888:function(e,t,a){"use strict";var o=a("5317"),i=a.n(o);i.a},"1a73":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-template"},[a("div",{staticClass:"org-set-rnt-title"},[a("span",{staticClass:"cha-title"},[e._v(e._s(e.title))]),e._v(">"),a("span",[e._v("  "+e._s(e.viceTitel))])]),a("div",{staticClass:"main-box"},[a("el-tabs",{staticClass:"tab-box",on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"教材信息",name:"1"}},[a("el-form",{ref:"textBookinfoId",staticClass:"demo-ruleForm demo-form-inline",attrs:{model:e.ruleForm,"label-width":"80px",rules:e.formRules}},[a("el-form-item",{staticClass:"labename",attrs:{label:"名称:",prop:"uservalue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.contentName))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],staticClass:"icon-none",attrs:{placeholder:"请选择",disabled:""},model:{value:e.uservalue,callback:function(t){e.uservalue=t},expression:"uservalue"}},e._l(e.username,function(e){return a("el-option",{key:e.value,attrs:{multiple:"",filterable:"",label:e.label,value:e.value}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"学段:",prop:"phasevalue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.periodIdText))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{placeholder:"请选择"},on:{change:e.getPhaseValue},model:{value:e.ruleForm.phasevalue,callback:function(t){e.$set(e.ruleForm,"phasevalue",t)},expression:"ruleForm.phasevalue"}},e._l(e.ruleForm.phase,function(e){return a("el-option",{key:e.code,attrs:{label:e.text,value:e.code}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"学科:",prop:"subjectValue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.subjectIdName))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{placeholder:"请选择"},on:{change:e.getSubjectsValue},model:{value:e.ruleForm.subjectValue,callback:function(t){e.$set(e.ruleForm,"subjectValue",t)},expression:"ruleForm.subjectValue"}},e._l(e.ruleForm.subjectData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"版本:",prop:"versionValue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.textbookVersionIdName))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{placeholder:"请选择"},model:{value:e.ruleForm.versionValue,callback:function(t){e.$set(e.ruleForm,"versionValue",t)},expression:"ruleForm.versionValue"}},e._l(e.ruleForm.versionData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"年级:",prop:"gradeValue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.gradeIdText))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{placeholder:"请选择"},on:{change:e.getgradeSelectValue},model:{value:e.ruleForm.gradeValue,callback:function(t){e.$set(e.ruleForm,"gradeValue",t)},expression:"ruleForm.gradeValue"}},e._l(e.ruleForm.gradeData,function(e){return a("el-option",{key:e.code,attrs:{label:e.text,value:e.code}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"分册:",prop:"volumeValue"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.sheetsTypeText))]),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{placeholder:"请选择"},on:{change:e.getvolumeValue},model:{value:e.ruleForm.volumeValue,callback:function(t){e.$set(e.ruleForm,"volumeValue",t)},expression:"ruleForm.volumeValue"}},e._l(e.ruleForm.volumedata,function(e){return a("el-option",{key:e.code,attrs:{label:e.text,value:e.code}})}))],1),a("el-form-item",{staticClass:"labename",attrs:{label:"备注:",prop:"name"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.editSwitch,expression:"!editSwitch"}]},[e._v(e._s(e.bookinfodata.notes))]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],staticClass:"limitlabewidth",model:{value:e.ruleForm.notesValue,callback:function(t){e.$set(e.ruleForm,"notesValue",t)},expression:"ruleForm.notesValue"}})],1),a("el-row",{staticClass:"saveBtn"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.editSwitch,expression:"editSwitch"}],attrs:{type:"primary"},on:{click:function(t){e.getSave("textBookinfoId")}}},[e._v("保存")])],1)],1)],1),a("el-tab-pane",{staticStyle:{height:"100%"},attrs:{label:"教材目录",name:"2"}},[a("div",{staticClass:"org-set"},[a("div",{staticClass:"org-set-left"},[a("tree",{attrs:{treeData:e.treeLeftData,defaultProps:e.defaultProps},on:{"list-Tree":e.listTree}})],1),a("div",{staticClass:"org-set-rnt"},[e.bookcatalo?a("ul",{staticClass:"right-deatil"},[a("li",{staticClass:"item-box"},[a("span",{staticClass:"left-Field"},[e._v("类型:")]),a("span",{staticClass:"right-Content"},[e._v(e._s(e.BookDetailData.catalogTypeText))])]),a("li",{staticClass:"item-box"},[a("span",{staticClass:"left-Field"},[e._v("上级:")]),a("span",{staticClass:"right-Content"},[e._v(e._s(e.BookDetailData.parentName))])]),a("li",{staticClass:"item-box"},[a("span",{staticClass:"left-Field"},[e._v("名称:")]),a("span",{staticClass:"right-Content"},[e._v(e._s(e.BookDetailData.catalogName))])]),a("li",{staticClass:"item-box"},[a("span",{staticClass:"left-Field"},[e._v("排序:")]),a("span",{staticClass:"right-Content"},[e._v(e._s(e.BookDetailData.orderIndex))])]),a("li",{staticClass:"item-box"},[a("span",{staticClass:"left-Field"},[e._v("知识点:")]),a("span",{staticClass:"right-Content"},e._l(e.BookDetailData.pointsId,function(t,o){return a("a",{key:o},[e._v(" "+e._s(t.knowledgePointsName))])}))])]):a("el-form",{ref:"bookmoduleId",attrs:{model:e.form,"label-width":"80px",rules:e.bookmoduleRules}},[a("el-form-item",{attrs:{label:"类型:",prop:"typeValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.typeValue,callback:function(t){e.$set(e.form,"typeValue",t)},expression:"form.typeValue"}},e._l(e.typeData,function(e){return a("el-option",{key:e.code,attrs:{label:e.text,value:e.code}})}))],1),a("el-form-item",{attrs:{label:"上级:",prop:"superiorValue"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.superiorValue,callback:function(t){e.$set(e.form,"superiorValue",t)},expression:"form.superiorValue"}},e._l(e.superiorData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"名称:",prop:"name"}},[a("el-input",{staticClass:"limtwidth",model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"排序:"}},[a("el-input",{staticClass:"limtwidth",model:{value:e.form.order,callback:function(t){e.$set(e.form,"order",t)},expression:"form.order"}})],1),a("el-form-item",{attrs:{label:"知识点:"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.valuePoint,callback:function(t){e.valuePoint=t},expression:"valuePoint"}},e._l(e.knowData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),a("el-form-item",[a("el-button",{staticClass:"form-save",attrs:{type:"primary"},on:{click:function(t){e.onSave("bookmoduleId")}}},[e._v("保存")])],1)],1)],1)])]),a("div",{staticClass:"empty"})],1),a("div",{staticClass:"org-set-rnt-bott"},[a("btnList",{directives:[{name:"show",rawName:"v-show",value:e.editorFlag,expression:"editorFlag"}],attrs:{model:e.modelEditor},on:{"btn-click":function(t){e.Editor(0)}}}),a("btnList",{directives:[{name:"show",rawName:"v-show",value:e.addFlag,expression:"addFlag"}],attrs:{model:e.modelAdd},on:{"btn-click":function(t){e.Add(1)}}}),a("btnList",{directives:[{name:"show",rawName:"v-show",value:e.disableFlag,expression:"disableFlag"}],attrs:{model:e.modelDisable},on:{"btn-click":e.Disable}})],1)],1)])},i=[],s=(a("7f7f"),a("7514"),a("ade3")),r=a("8404"),l=a("55a9"),n={data:function(){var e;return e={title:"教材管理",viceTitel:"详情",activeName:"1",editSwitch:!1,ruleForm:{name:"",Jane:"",orgId:"",region:"",sorting:"",countyArea:"",schoolPhase:"",schoolArea:"",schoolAccount:"",schoolPass:"",schoolWill:"",eduAreaId:"",schoolDistrict:"",campusPhase:"",campusArea:"",campusDistrict:"",id:"",phase:[],phasevalue:"",phasevalueName:"",subjectData:[],subjectValue:"",subjectValueName:"",versionData:[],versionValue:"",gradeData:[],gradeValue:"",gradeValueName:"",notesValue:"",volumedata:[],volumeValue:"",volumeValueName:""},uservalue:"",bookinfodata:{},formRules:{phasevalue:[{required:!0,message:"请选择学段",trigger:"change"}],subjectValue:[{required:!0,message:"请选择学科",trigger:"change"}],versionValue:[{required:!0,message:"请选择版本",trigger:"change"}],gradeValue:[{required:!0,message:"请选择年级",trigger:"change"}],volumeValue:[{required:!0,message:"请选择分册",trigger:"change"}]},textBookinfoId:{},bookmoduleId:{},bookmoduleid:"",username:[],value:"",regionaShow:!1,knowData:[],treeLeftData:[],superiorsdata:[],defaultProps:{children:"children",label:"name"},form:{typeValue:"",name:"",order:"",region:"",superiorValue:""},bookmoduleRules:{typeValue:[{required:!0,message:"请选择类型",trigger:"change"}],superiorValue:[{required:!0,message:"请选择上级",trigger:"change"}],name:[{required:!0,message:"请选择名称",trigger:"change"}]},typeData:[{text:"语文",code:"01"},{text:"单元组",code:"02"}]},Object(s["a"])(e,"value",""),Object(s["a"])(e,"valuePoint",[]),Object(s["a"])(e,"superiorData",[]),Object(s["a"])(e,"bookcatalo",!0),Object(s["a"])(e,"treestate",""),Object(s["a"])(e,"BookDetailData",{}),Object(s["a"])(e,"modelEditor",{name:"编辑",icon:"icon-edit"}),Object(s["a"])(e,"modelAdd",{name:"添加",icon:"icon-add"}),Object(s["a"])(e,"modelDisable",{name:"禁用",icon:"icon-stop"}),Object(s["a"])(e,"editorFlag",!0),Object(s["a"])(e,"addFlag",!1),Object(s["a"])(e,"disableFlag",!1),Object(s["a"])(e,"emtpyarr",[]),Object(s["a"])(e,"pointarr",[]),e},components:{tree:r["a"],btnList:l["default"]},created:function(){var e=this;1==this.$route.query.editSwitch?(this.editSwitch=this.$route.query.editSwitch,this.ruleForm.id=this.$route.query.id,this.editorFlag=this.$route.query.editorFlag):this.ruleForm.id=this.$route.query.id,this.dictionary(),this.subjectSelect(),this.versionApiData(),this.getInfoData(),this.getapiTreeData(),setTimeout(function(){e.getapiTreeSelectpointData()},500),setTimeout(function(){e.getSuperiorData()},700)},methods:{dictionary:function(){var e=this,t={type:["stage","grade","sheetsType"]};this.$api.dictSelect(t).then(function(t){if(1==t.success){var a=0;for(a=0;a<t.data.length;a++)"stage"==t.data[a].type?e.ruleForm.phase=t.data[a].data:"grade"==t.data[a].type?e.ruleForm.gradeData=t.data[a].data:"sheetsType"==t.data[a].type&&(e.ruleForm.volumedata=t.data[a].data,console.log(e.ruleForm.volumedata))}})},subjectSelect:function(){var e=this,t={};this.$api.subjectSelect(t).then(function(t){1==t.success&&(e.ruleForm.subjectData=t.data,console.log(e.ruleForm.subjectData))})},versionApiData:function(){var e=this;this.$api.versionSelect().then(function(t){1==t.success&&(e.ruleForm.versionData=t.data)})},getgradeSelectValue:function(e){var t={};t=this.ruleForm.gradeData.find(function(t){return t.code==e}),this.ruleForm.gradeValueName=t.text},getPhaseValue:function(e){var t={};t=this.ruleForm.phase.find(function(t){return t.code==e}),console.log(e),this.ruleForm.phasevalueName=t.text},getvolumeValue:function(e){var t={};t=this.ruleForm.volumedata.find(function(t){return t.code==e}),this.ruleForm.volumeValueName=t.text},getSubjectsValue:function(e){var t={};t=this.ruleForm.subjectData.find(function(t){return t.id==e}),this.ruleForm.subjectValueName=t.name},getSave:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return console.log("error submit!!",res.msg),!1;var a={id:t.ruleForm.id,gradeId:t.ruleForm.gradeValue,gradeIdText:t.bookinfodata.periodIdText,notes:t.ruleForm.notesValue,periodId:t.ruleForm.phasevalue,periodIdText:t.bookinfodata.periodIdText,sheetsType:t.ruleForm.volumeValue,sheetsTypeText:t.bookinfodata.sheetsTypeText,subjectId:t.ruleForm.subjectValue,subjectIdName:t.bookinfodata.subjectIdName,textbookVersionId:t.ruleForm.versionValue};t.$api.TextbookInfoSave(a).then(function(e){1==e.success&&(t.$myLayer.successLayer(e.msg),t.getInfoData(),t.editSwitch=!1,t.editorFlag=!0)})})},getInfoData:function(){var e=this,t={id:this.ruleForm.id};this.$api.getIdData(t).then(function(t){1==t.success&&(e.bookinfodata=t.data,e.treestate=t.data.status,e.uservalue=t.data.contentName,console.log(t.data.sheetsType),e.ruleForm.phasevalue=t.data.periodId,e.ruleForm.subjectValue=t.data.subjectId,e.ruleForm.versionValue=t.data.textbookVersionId,e.ruleForm.gradeValue=t.data.gradeId,e.ruleForm.volumeValue=""+t.data.sheetsType,e.ruleForm.notesValue=t.data.notes)})},getapiTreeData:function(){var e=this,t={contentId:this.ruleForm.id,status:this.treestate};this.$api.getTreeData(t).then(function(t){console.log("树",t.data),e.treeLeftData.push(t.data)})},getapiTreeSelectpointData:function(){var e=this,t={periodCode:this.bookinfodata.periodId,subjectId:this.bookinfodata.subjectId};console.log("params",t),this.$api.getTreeSelectData(t).then(function(t){console.log("知识点返回来的数据",t.data),1==t.success&&(e.knowData=t.data)})},handleClick:function(e,t){console.log(e,t),0==e.index?(this.addFlag=!1,this.disableFlag=!1,this.editorFlag=!0,1==this.editSwitch&&(this.editorFlag=!1)):1==e.index&&(this.addFlag=!0,this.disableFlag=!0,this.editorFlag=!0,0==this.bookcatalo&&(this.editorFlag=!1))},getSuperiorData:function(){var e=this,t={contentId:this.bookinfodata.id};console.log(t),this.$api.getSuperior(t).then(function(t){1==t.success&&(e.superiorData=t.data),console.log("上级",t.data)})},listTree:function(e){if(0==this.bookcatalo)console.log("你点击的树形菜单",e),this.form.name=e.name,this.bookmoduleid=e.id;else{e.id;this.form.order=e.id,console.log("你点击的树形菜单",e),this.getapigetBookDetail()}},getapigetBookDetail:function(){var e=this,t={id:this.form.order};this.$api.getBookDetail(t).then(function(t){console.log("-------ha",t.data),1==t.success&&(console.log(t),e.BookDetailData=t.data)})},onSave:function(e){var t=this;for(var a in console.log("this.knowData",this.knowData),console.log("this.valuePoint",this.valuePoint),this.knowData)this.valuePoint[a]==this.knowData[a].id&&(this.emtpyarr.push(this.knowData[a].name),console.log(this.emtpyarr));for(var o in console.log("搜集的数据name",this.emtpyarr),this.valuePoint)for(var i in this.emtpyarr)o==i&&this.pointarr.push({knowledgePointsId:this.valuePoint[o],knowledgePointsName:this.emtpyarr[i]});console.log("等会要传递的参数",this.pointarr);var s=this;s.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={catalogName:s.form.name,catalogType:s.treeLeftData[0].pid,id:s.bookmoduleid,orderIndex:s.form.order,parentId:s.form.superiorValue,pointsId:s.pointarr,textbookContentId:s.ruleForm.id};console.log("提交了",a),t.$api.postModuleSave(a).then(function(e){console.log(e.data),1==e.success&&(t.$message({message:"保存成功",type:"success"}),s.bookcatalo=!0)})})},Editor:function(e){this.editSwitch=!0,this.editorFlag=!1,1==this.bookcatalo&&(this.bookcatalo=!1)},Add:function(){},Disable:function(){}}},c=n,u=(a("1888"),a("2877")),d=Object(u["a"])(c,o,i,!1,null,null,null);d.options.__file="material-man-details.vue";t["default"]=d.exports},"44cb":function(e,t,a){},"523d":function(e,t,a){"use strict";var o=a("44cb"),i=a.n(o);i.a},5317:function(e,t,a){},"55a9":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.list.name,placement:"top"}},[a("button",{staticClass:"icon-btn",on:{click:e.btnClick}},[a("i",{staticClass:"iconfont",class:e.list.icon})])])},i=[],s={name:"btnList",props:{model:Object},data:function(){return{list:this.model}},created:function(){},methods:{btnClick:function(){this.$emit("btn-click",this.model.alias)}}},r=s,l=(a("b6d5"),a("2877")),n=Object(l["a"])(r,o,i,!1,null,"18503ae0",null);n.options.__file="btn-list.vue";t["default"]=n.exports},7514:function(e,t,a){"use strict";var o=a("5ca1"),i=a("0a49")(5),s="find",r=!0;s in[]&&Array(1)[s](function(){r=!1}),o(o.P+o.F*r,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(s)},"7f7f":function(e,t,a){var o=a("86cc").f,i=Function.prototype,s=/^\s*function ([^ (]*)/,r="name";r in i||a("9e1e")&&o(i,r,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},8404:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree"},[a("div",{staticClass:"tree-top"},[a("el-tree",{attrs:{data:e.treeData,props:e.defaultProps,"default-expand-all":"","expand-on-click-node":!1},on:{"node-click":e.handleNodeClick}})],1),a("div",{staticClass:"tree-bnt"},[a("el-switch",{attrs:{"active-color":"#4a80f6","inactive-color":"#BABABA"},on:{change:e.switchChange},model:{value:e.stateSwitch,callback:function(t){e.stateSwitch=t},expression:"stateSwitch"}})],1)])},i=[],s={name:"tree",props:["treeData","defaultProps"],data:function(){return{stateSwitch:!1}},methods:{handleNodeClick:function(e){this.$emit("list-Tree",e)},switchChange:function(e){this.$emit("tree-switch",e)}}},r=s,l=(a("523d"),a("2877")),n=Object(l["a"])(r,o,i,!1,null,"080cfd50",null);n.options.__file="tree.vue";t["a"]=n.exports},ade3:function(e,t,a){"use strict";function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return o})},b6d5:function(e,t,a){"use strict";var o=a("f9e4"),i=a.n(o);i.a},cd1c:function(e,t,a){var o=a("e853");e.exports=function(e,t){return new(o(e))(t)}},e853:function(e,t,a){var o=a("d3f4"),i=a("1169"),s=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),o(t)&&(t=t[s],null===t&&(t=void 0))),void 0===t?Array:t}},f9e4:function(e,t,a){}}]);
//# sourceMappingURL=chunk-34b55069.cfcdd78a.js.map