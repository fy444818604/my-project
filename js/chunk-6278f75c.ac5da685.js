(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6278f75c","chunk-264358d7","chunk-b8cd8812"],{"07b8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-input",{attrs:{placeholder:"请选择或输入"},on:{focus:function(t){e.isShow(!0)}},model:{value:e.showText,callback:function(t){e.showText=t},expression:"showText"}},[a("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},on:{click:function(t){e.isShow(!e.orgSelectIsShow)}},slot:"suffix"})]),e.orgSelectIsShow?a("div",{staticClass:"el-div-tree"},[a("el-tree",{ref:"orgSelect",staticClass:"filter-tree",attrs:{props:e.defaultProps,"filter-node-method":e.filterNode,data:e.orgData},on:{"node-click":e.nodeSelect}})],1):e._e()],1)},n=[],o=(a("c5f6"),{name:"org-select",props:{rootId:String,initText:String,refreshText:Boolean,onlyOrg:Number},data:function(){return{orgData:[],defaultProps:{children:"children",label:"displayName"},orgSelectIsShow:!1,showText:"",defaultText:"",orgId:"",onlyOrgT:1}},watch:{showText:function(e){this.$refs.orgSelect&&this.$refs.orgSelect.filter(e)},refreshText:function(){this.defaultText=this.initText,this.showText=this.initText},rootId:function(){this.queryOrg()}},created:function(){void 0!=this.onlyOrg&&(this.onlyOrgT=0),console.log(this.initText),this.queryOrg()},methods:{queryOrg:function(){var e=this,t={level:0,onlyOrg:this.onlyOrgT,parentId:this.rootId};this.$api.institutions(t).then(function(t){!0===t.success&&t.data.length>0&&(e.orgData=t.data)})},nodeSelect:function(e){var t=this;this.$emit("node-select",e,function(a){a&&(t.showText=e.displayName,t.defaultText=t.showText,t.orgId=e.id,t.isShow(!t.orgSelectIsShow))})},filterNode:function(e,t){return!e||-1!==t.displayName.indexOf(e)},isShow:function(e){this.orgSelectIsShow=e,this.orgSelectIsShow||(this.showText=this.defaultText)}}}),i=o,s=(a("da7b"),a("2877")),l=Object(s["a"])(i,r,n,!1,null,"27bcd496",null);l.options.__file="org-select.vue";t["default"]=l.exports},"0a93":function(e,t,a){},"11e9":function(e,t,a){var r=a("52a7"),n=a("4630"),o=a("6821"),i=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=o(e),t=i(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return n(!r.f.call(e,t),e[t])}},2621:function(e,t){t.f=Object.getOwnPropertySymbols},"2b49":function(e,t,a){},"52a7":function(e,t){t.f={}.propertyIsEnumerable},"5dbc":function(e,t,a){var r=a("d3f4"),n=a("8b97").set;e.exports=function(e,t,a){var o,i=t.constructor;return i!==a&&"function"==typeof i&&(o=i.prototype)!==a.prototype&&r(o)&&n&&n(e,o),e}},7333:function(e,t,a){"use strict";var r=a("0d58"),n=a("2621"),o=a("52a7"),i=a("4bf8"),s=a("626a"),l=Object.assign;e.exports=!l||a("79e5")(function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=r})?function(e,t){var a=i(e),l=arguments.length,c=1,d=n.f,u=o.f;while(l>c){var f,h=s(arguments[c++]),p=d?r(h).concat(d(h)):r(h),m=p.length,b=0;while(m>b)u.call(h,f=p[b++])&&(a[f]=h[f])}return a}:l},"75ab":function(e,t,a){"use strict";var r=a("aa8c"),n=a.n(r);n.a},"7f7f":function(e,t,a){var r=a("86cc").f,n=Function.prototype,o=/^\s*function ([^ (]*)/,i="name";i in n||a("9e1e")&&r(n,i,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(e){return""}}})},"8b49":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-detail"},[a("base-title",{attrs:{bread:"",breadList:[e.roleData.displayName],title:"角色"}}),a("div",{staticClass:"content"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{staticStyle:{width:"400px"},attrs:{label:"角色信息",name:"first"}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"100px",rules:e.formRules}},[a("el-form-item",{attrs:{label:"角色名称:",prop:"displayName"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.control,expression:"!control"}]},[e._v(e._s(e.addForm.displayName))]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],model:{value:e.addForm.displayName,callback:function(t){e.$set(e.addForm,"displayName",t)},expression:"addForm.displayName"}})],1),a("el-form-item",{attrs:{label:"机构:",prop:"orgId"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.control,expression:"!control"}]},[e._v(e._s(e.addForm.orgId))]),a("org-select",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],attrs:{rootId:e.rootId,initText:e.orgSelectText,refreshText:e.refreshText},on:{"node-select":e.handleOrgSelect}})],1),a("el-form-item",{attrs:{label:"描述:",prop:"describe"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.control,expression:"!control"}]},[e._v(e._s(e.addForm.describe))]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],model:{value:e.addForm.describe,callback:function(t){e.$set(e.addForm,"describe",t)},expression:"addForm.describe"}})],1),a("el-form-item",{attrs:{label:"显示顺序:",prop:"orderIndex"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!e.control,expression:"!control"}]},[e._v(e._s(e.addForm.orderIndex))]),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],model:{value:e.addForm.orderIndex,callback:function(t){e.$set(e.addForm,"orderIndex",t)},expression:"addForm.orderIndex"}})],1),a("el-form-item",[a("input",{directives:[{name:"show",rawName:"v-show",value:e.control,expression:"control"}],staticClass:"button",attrs:{type:"button",value:"保存"},on:{click:e.save}})])],1)],1),a("el-tab-pane",{attrs:{label:"成员列表",name:"second"}},[a("el-table",{staticStyle:{"margin-top":"5px"},attrs:{data:e.tableData},on:{"selection-change":e.tableDataChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"securityLevel",label:"安全等级"}}),a("el-table-column",{attrs:{prop:"orgName",label:"机构"}}),a("el-table-column",{attrs:{label:"操作",width:"60"}})],1),a("div",{staticClass:"footer"},[a("page",{staticClass:"page",attrs:{pageTotal:e.pageTotal},on:{handleSizeChange:e.SizeMembers,handleCurrentChange:e.CurrentMembers}})],1)],1)],1),a("div",{staticClass:"icon"},[a("btn-list",{directives:[{name:"show",rawName:"v-show",value:e.opeState,expression:"opeState"}],attrs:{model:{icon:"icon-edit",name:"编辑"}},on:{"btn-click":e.roleEdit}}),a("btn-list",{directives:[{name:"show",rawName:"v-show",value:e.opeStateT,expression:"opeStateT"}],attrs:{model:{icon:"icon-add",name:"添加"}},on:{"btn-click":e.associated}}),a("btn-list",{directives:[{name:"show",rawName:"v-show",value:e.opeStateT,expression:"opeStateT"}],attrs:{model:{icon:"icon-del",name:"删除"}},on:{"btn-click":e.associateDell}})],1)],1),a("div",{staticClass:"stu-yeaer-modal-add"},[a("div",{staticClass:"modalAdd"},[[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}})],1),a("el-form-item",{attrs:{label:"组织结构",prop:"institutions"}},[a("div",{on:{click:e.structureTop}},[a("el-input",{attrs:{placeholder:"请选择或输入"},on:{blur:e.instBlur,click:function(e){e.stopPropagation()}},model:{value:e.formInline.queryFilterText,callback:function(t){e.$set(e.formInline,"queryFilterText",t)},expression:"formInline.queryFilterText"}},[a("i",{staticClass:"iconfont icon-apartment",attrs:{slot:"suffix"},slot:"suffix"})])],1),e.queryStruct?a("div",{staticClass:"el-div-tree"},[a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.labelData,props:e.defaultProps,"default-expand-all":"","filter-node-method":e.filterNode},on:{"node-click":e.queryAddIns}})],1):e._e()]),a("el-form-item",[a("el-checkbox",{model:{value:e.formInline.checked,callback:function(t){e.$set(e.formInline,"checked",t)},expression:"formInline.checked"}},[e._v("含下级")])],1),a("el-form-item",{attrs:{label:"安全级别","label-width":"80px"}},[a("el-input",{staticStyle:{width:"50px"},model:{value:e.formInline.levelLeft,callback:function(t){e.$set(e.formInline,"levelLeft",t)},expression:"formInline.levelLeft"}})],1),a("el-form-item",{attrs:{label:"","label-width":"40px"}},[e._v("-")]),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"50px"},model:{value:e.formInline.levelRnt,callback:function(t){e.$set(e.formInline,"levelRnt",t)},expression:"formInline.levelRnt"}})],1),a("el-button",{staticClass:"sear-btn",on:{click:e.searchAdd}},[e._v("查询")]),a("el-button",{staticClass:"clear-btn",attrs:{type:"text"}},[e._v("清空")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.membersData},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"userName",label:"姓名"}}),a("el-table-column",{attrs:{prop:"workId",label:"工号"}}),a("el-table-column",{attrs:{prop:"orgName",label:"组织机构"}}),a("el-table-column",{attrs:{prop:"securityLevel",label:"安全级别",width:"100"}})],1),a("div",{staticStyle:{"text-align":"right",padding:"20px 0px"}},[a("page",{staticClass:"page",attrs:{pageTotal:e.pageTotalAdd},on:{handleSizeChange:e.SizeChange,handleCurrentChange:e.CurrentChange}})],1)]],2)])],1)},n=[],o=a("fad2"),i=o["a"],s=(a("75ab"),a("a143"),a("2877")),l=Object(s["a"])(i,r,n,!1,null,"528493d1",null);l.options.__file="detail.vue";t["default"]=l.exports},"8b97":function(e,t,a){var r=a("d3f4"),n=a("cb7c"),o=function(e,t){if(n(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return o(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:o}},9093:function(e,t,a){var r=a("ce10"),n=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},a143:function(e,t,a){"use strict";var r=a("0a93"),n=a.n(r);n.a},aa77:function(e,t,a){var r=a("5ca1"),n=a("be13"),o=a("79e5"),i=a("fdef"),s="["+i+"]",l="​",c=RegExp("^"+s+s+"*"),d=RegExp(s+s+"*$"),u=function(e,t,a){var n={},s=o(function(){return!!i[e]()||l[e]()!=l}),c=n[e]=s?t(f):i[e];a&&(n[a]=c),r(r.P+r.F*s,"String",n)},f=u.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},aa8c:function(e,t,a){},c5f6:function(e,t,a){"use strict";var r=a("7726"),n=a("69a8"),o=a("2d95"),i=a("5dbc"),s=a("6a99"),l=a("79e5"),c=a("9093").f,d=a("11e9").f,u=a("86cc").f,f=a("aa77").trim,h="Number",p=r[h],m=p,b=p.prototype,v=o(a("2aeb")(b))==h,g="trim"in String.prototype,x=function(e){var t=s(e,!1);if("string"==typeof t&&t.length>2){t=g?t.trim():f(t,3);var a,r,n,o=t.charCodeAt(0);if(43===o||45===o){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var i,l=t.slice(2),c=0,d=l.length;c<d;c++)if(i=l.charCodeAt(c),i<48||i>n)return NaN;return parseInt(l,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof p&&(v?l(function(){b.valueOf.call(a)}):o(a)!=h)?i(new m(x(t)),a,p):x(t)};for(var I,y=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)n(m,I=y[w])&&!n(p,I)&&u(p,I,d(m,I));p.prototype=b,b.constructor=p,a("2aba")(r,h,p)}},da7b:function(e,t,a){"use strict";var r=a("2b49"),n=a.n(r);n.a},f751:function(e,t,a){var r=a("5ca1");r(r.S+r.F,"Object",{assign:a("7333")})},fad2:function(e,t,a){"use strict";(function(e){a("7f7f"),a("f751");var r=a("07b8");t["a"]={data:function(){return{parId:"",roleData:"",control:!1,orgSelectText:"",refreshText:!1,rootId:"0",addForm:{displayName:"",orgId:"",describe:"",orderIndex:""},formRules:{displayName:[{required:!0,message:"请输入名称",trigger:"blur"}],orgId:[{required:!0,message:"请选择机构",trigger:"blur"}]},opeState:!0,opeStateT:!1,pageIndex:1,pageSize:15,pageTotal:0,membersData:[],delInput:[],pageIndexAdd:1,pageSizeAdd:10,pageTotalAdd:0,checkedT:"",queryFilterText:"",labelData:[],ids:[],queryStruct:!1,defaultProps:{children:"children",label:"displayName"},formInline:{name:"",queryFilterText:"",levelLeft:"",levelRnt:"",checked:""},activeName:"first",tableData:[]}},components:{btnList:function(){return a.e("chunk-39930572").then(a.bind(null,"55a9"))},page:function(){return a.e("chunk-66786a86").then(a.bind(null,"7064"))},baseTitle:function(){return a.e("chunk-8461d7c0").then(a.bind(null,"6968"))},"org-select":r["default"]},created:function(){this.parId=this.$route.query.id,this.roleList(),this.member(),this.institutions()},methods:{filterNode:function(e,t){return!e||-1!==t.displayName.indexOf(e)},institutions:function(){var e=this,t={level:0,onlyOrg:1,parentId:0};this.$api.institutions(t).then(function(t){1==t.success&&(e.labelData=t.data)})},roleList:function(){var e=this,t={id:this.parId};this.$api.roleList(t).then(function(t){1==t.success&&(e.addForm={displayName:t.data.displayName,describe:t.data.notes,orderIndex:t.data.orderIndex},e.roleData=t.data,e.addForm.orgId=e.roleData.orgName)})},roleEdit:function(){this.control=!0,this.addForm.name=this.roleData.orgName,this.addForm.orgId=this.roleData.orgId,this.orgSelectText=this.roleData.orgName,this.refreshText=!this.refreshText},save:function(){var e=this,t=this;t.$refs["addForm"].validate(function(a){if(!a)return!1;var r={id:e.parId,displayName:t.addForm.displayName,notes:t.addForm.describe,orderIndex:t.addForm.orderIndex};t.$api.roleEdit(r).then(function(a){1==a.success&&(t.$myLayer.successLayer(a.msg),t.roleList(),e.control=!1)})})},handleOrgSelect:function(e,t){t(!0)},handleClick:function(e){"1"==e.index?(this.opeState=!1,this.opeStateT=!0):(this.opeState=!0,this.opeStateT=!1)},member:function(){var e=this,t={roleId:this.parId,pageIndex:this.pageIndex,pageSize:this.pageSize};this.$api.memberList(t).then(function(t){if(1==t.success){var a=[],r=t.data;r.map(function(e,t){a.push(Object.assign({index:t+1},e,{indexNum:"str"}))}),e.tableData=a,e.pageTotal=parseInt(t.totalDatas)}})},associateDell:function(){var e=this;if(""!=e.delInput){var t={accountIds:e.delInput,roleId:e.parId};e.$api.associateDell(t).then(function(t){1==t.success&&(e.$myLayer.successLayer(t.msg),e.member())})}else e.$myLayer.errorLayer("至少选择一条数据")},tableDataChange:function(e){var t=[],a=0;for(a=0;a<e.length;a++)t.push(e[a].id);this.delInput=t},SizeChange:function(e){this.pageSize=e,this.member()},CurrentChange:function(e){this.pageIndex=e,this.member()},associated:function(){this.notMemberList();var t=this;t.$myLayer.formLayer("添加成员",e(".stu-yeaer-modal-add"),["1000px"],function(){if(""!=t.ids){var e={accountIds:t.ids,roleId:t.parId};t.$api.associatedList(e).then(function(e){1==e.success&&(t.$myLayer.successLayer(e.msg),t.member())})}else t.$myLayer.errorLayer("至少选择一条数据")})},notMemberList:function(){var e=this,t={userName:this.formInline.name,orgId:this.queryFilterText,isIncSub:this.checkedT,securityLevelStart:this.formInline.levelLeft,securityLevelEnd:this.formInline.levelRnt,pageIndex:this.pageIndexAdd,pageSize:this.pageSizeAdd};this.$api.notMemberList(t).then(function(t){1==t.success&&(e.pageTotalAdd=parseInt(t.totalDatas),e.membersData=t.data)})},queryAddIns:function(e){this.queryFilterText=e.id,this.formInline.queryFilterText=e.displayName,this.queryStruct=!1},structureTop:function(){this.queryStruct=!this.queryStruct},instBlur:function(){this.queryStruct=!1},SizeMembers:function(e){this.pageSizeAdd=e,this.notMemberList()},CurrentMembers:function(e){this.pageIndexAdd=e,this.notMemberList()},searchAdd:function(){var e="";e=1==this.formInline.checked?0:1,this.checkedT=e,this.notMemberList()},handleSelectionChange:function(e){var t=[],a=0;for(a=0;a<e.length;a++)t.push(e[a].id);this.ids=t}}}}).call(this,a("1157"))},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-6278f75c.ac5da685.js.map