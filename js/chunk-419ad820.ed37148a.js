(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-419ad820"],{"1d1b":function(e,t,a){"use strict";var r=a("a888"),o=a.n(r);o.a},"331b":function(e,t,a){"use strict";var r=a("9e5a"),o=a.n(r);o.a},"65e8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[e._m(0),a("div",{staticClass:"box"},[a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px",rules:e.rules}},[a("el-form-item",{attrs:{label:"课程名称:",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"课程类型:",prop:"type"}},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"学科",value:"8010"}}),a("el-option",{attrs:{label:"活动",value:"8011"}})],1)],1),a("el-form-item",{attrs:{label:"教材:",prop:"options"}},[a("el-input",{attrs:{"suffix-icon":"el-icon-arrow-down",placeholder:"请选择相关课程"},nativeOn:{click:function(t){t.stopPropagation(),e.showSelect=!0}},model:{value:e.form.catrgory.label,callback:function(t){e.$set(e.form.catrgory,"label",t)},expression:"form.catrgory.label"}}),e.showSelect?a("div",{directives:[{name:"clickOutSide",rawName:"v-clickOutSide",value:e.handleOutFocusInput,expression:"handleOutFocusInput"}],staticClass:"select-wrap"},[a("div",{staticClass:"select-items"},[a("el-select",{attrs:{placeholder:"全部学段"},model:{value:e.stageValue,callback:function(t){e.stageValue=t},expression:"stageValue"}},[a("el-option",{attrs:{value:"-1",label:"全部学段"}}),e._l(e.allStageList,function(e){return a("el-option",{key:e.code,attrs:{value:e.code,label:e.text}})})],2),a("el-select",{attrs:{placeholder:"全部科目"},model:{value:e.subjectValue,callback:function(t){e.subjectValue=t},expression:"subjectValue"}},[a("el-option",{attrs:{value:"-1",label:"全部科目"}}),e._l(e.allSubject,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2),a("el-select",{attrs:{placeholder:"全部年级"},model:{value:e.gradeValue,callback:function(t){e.gradeValue=t},expression:"gradeValue"}},[a("el-option",{attrs:{label:"全部年级",value:"-1"}}),e._l(e.allGradeList,function(e){return a("el-option",{key:e.id,attrs:{value:e.code,label:e.text}})})],2),a("el-select",{attrs:{placeholder:"全部版本"},model:{value:e.versionValue,callback:function(t){e.versionValue=t},expression:"versionValue"}},[a("el-option",{attrs:{value:"-1",label:"全部版本"}}),e._l(e.allVersionList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})})],2)],1),a("div",{staticClass:"select-lists"},[a("el-scrollbar",{staticStyle:{height:"100%"}},[a("el-tree",{attrs:{"empty-text":"请选择正确的学段/科目/年级/版本",data:e.treeList,props:e.defaultProps},on:{"node-click":e.handleNodeClickCategory}})],1)],1)]):e._e()],1),a("el-form-item",{attrs:{label:"时间:",required:""}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1),a("el-col",{attrs:{span:6,offset:2}},[a("el-form-item",{attrs:{prop:"num"}},[a("el-select",{attrs:{placeholder:"请选择节数"},model:{value:e.form.num,callback:function(t){e.$set(e.form,"num",t)},expression:"form.num"}},e._l(10,function(e){return a("el-option",{attrs:{label:e,value:e}})}))],1)],1)],1),a("el-form-item",{attrs:{label:"授课教室:",prop:"option1"}},[a("div",{directives:[{name:"clickOutSide",rawName:"v-clickOutSide",value:e.treeShow,expression:"treeShow"}]},[a("el-input",{attrs:{readonly:"",placeholder:"请选择教室"},on:{focus:e.areaSelect},model:{value:e.form.option1.name,callback:function(t){e.$set(e.form.option1,"name",t)},expression:"form.option1.name"}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"tree-wrap"},[a("el-tree",{attrs:{data:e.data,props:e.defaultProps},on:{"node-click":e.handleNodeClick}})],1)],1)]),a("el-form-item",{attrs:{label:"主讲老师:",prop:"teacher"}},[a("el-select",{attrs:{placeholder:"请选择老师"},model:{value:e.form.teacher,callback:function(t){e.$set(e.form,"teacher",t)},expression:"form.teacher"}},e._l(e.teacherList,function(e){return a("el-option",{key:e.id,attrs:{label:e.userName,value:e.id}})}))],1),a("el-form-item",{attrs:{label:"简介:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),8001==e.courseOrder?a("el-form-item",{attrs:{label:"直播:"}},[a("el-switch",{model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1):e._e(),a("el-form-item",{attrs:{label:"课件:"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"http://192.168.38.221:8081/uploadFile/upload.do","on-preview":e.handlePreview,"on-success":e.uploadSuccess,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,multiple:"",limit:3,"on-exceed":e.handleExceed,"file-list":e.fileList,headers:e.tokenData}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),8002==e.courseOrder?a("el-form-item",{attrs:{label:"开课方式:"}},[a("el-radio",{attrs:{label:"8012"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("互动方式")]),a("el-radio",{attrs:{label:"8013"},model:{value:e.form.radio,callback:function(t){e.$set(e.form,"radio",t)},expression:"form.radio"}},[e._v("直播方式")])],1):e._e(),8002==e.courseOrder&&8012==e.form.radio?a("el-form-item",{attrs:{label:"直播:"}},[a("el-switch",{model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}})],1):e._e(),8002==e.courseOrder&&8012==e.form.radio?a("el-form-item",{attrs:{label:"录制方式:"}},[a("el-radio",{attrs:{label:"8020"},model:{value:e.form.radio1,callback:function(t){e.$set(e.form,"radio1",t)},expression:"form.radio1"}},[e._v("本地录制")]),a("el-radio",{attrs:{label:"8021"},model:{value:e.form.radio1,callback:function(t){e.$set(e.form,"radio1",t)},expression:"form.radio1"}},[e._v("云录制")])],1):e._e(),8002==e.courseOrder&&8012==e.form.radio?a("el-form-item",{attrs:{label:"邀请教室:"}},[a("div",[a("i",{staticClass:"iconfont icon-add",on:{click:e.addClassroom}})]),e._l(e.invited,function(t,r){return a("div",{directives:[{name:"clickOutSide",rawName:"v-clickOutSide",value:e.treeShow,expression:"treeShow"}],staticStyle:{position:"relative"}},[a("el-input",{attrs:{readonly:"",placeholder:"请选择教室"},on:{focus:function(t){e.areaSelect1(r)}},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),a("div",[a("i",{staticClass:"iconfont icon-close",on:{click:function(t){e.classroomDel(r)}}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],staticClass:"tree-wrap"},[a("el-tree",{attrs:{data:e.data,props:e.defaultProps},on:{"node-click":e.handleNodeClick1}})],1)],1)})],2):e._e(),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"course-title"},[a("div",[e._v("课程预约")]),a("div",[e._v(" > 创建同步课堂")])])}],i=(a("7f7f"),a("ade3")),s={data:function(){var e;return e={tokenData:{Authorization:localStorage.getItem("Authorization")},courseOrder:8002,fileList:[],teacherList:[],data:[],defaultProps:{children:"children",label:"name"},show:!1,form:{catrgory:{label:"",value:""},name:"",type:"",option:"",date:[],num:"",options:"",option1:{name:"",id:0,pId:0},options2:[],teacher:"",intro:"",radio:"8012",value:!1,radio1:"8020"},invited:[],rules:{name:[{required:!0,message:"请输入课程名称",trigger:"blur"}],type:[{required:!0,message:"请输入课程名称",trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],num:[{required:!0,message:"请选择节数",trigger:"change"}],teacher:[{required:!0,message:"请选择老师",trigger:"change"}]},showSelect:!1,allStageList:[],stageValue:"-1",allSubject:[],subjectValue:"-1",allGradeList:[],gradeValue:"-1",allVersionList:[],versionValue:"-1",treeList:[]},Object(i["a"])(e,"defaultProps",{children:"children",label:"name"}),Object(i["a"])(e,"attachment",[]),e},created:function(){this.classroomSearch(),this.teacherSearch(),this.getAllGrade(),this.getAllSubject(),this.getAllClass(),this.getAllVersion(),this.getSubjectTree()},watch:{watchChange:function(e){this.getSubjectTree()}},computed:{watchChange:function(){return{stageValue:this.stageValue,subjectValue:this.subjectValue,gradeValue:this.gradeValue,versionValue:this.versionValue}}},methods:{handleNodeClickCategory:function(e){e.hasNext||(this.form.catrgory={value:e.id,label:e.name},this.handleOutFocusInput())},getSubjectTree:function(){var e=this,t={gradeId:this.gradeValue,periodId:this.stageValue,subjectId:this.subjectValue,textbookVersionId:this.versionValue};this.$api.getSubjectTree(t).then(function(t){e.treeList=t.data})},getAllGrade:function(){var e=this,t={type:"stage"};this.$api.dictGetByType(t).then(function(t){e.allStageList=t.data})},getAllSubject:function(){var e=this;this.$api.getSubjectByGrade().then(function(t){e.allSubject=t.data})},getAllClass:function(){var e=this,t={type:"grade"};this.$api.dictGetByType(t).then(function(t){e.allGradeList=t.data})},getAllVersion:function(){var e=this;this.$api.getKeyAndValue().then(function(t){e.allVersionList=t.data})},handleOutFocusInput:function(){this.showSelect=!1},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},classroomSearch:function(){var e=this;this.$api.orderCourseRoomSearch().then(function(t){e.data=e.getTree(t.data,0)})},teacherSearch:function(){var e=this;this.$api.orderTeacherSearch().then(function(t){e.teacherList=t.data,console.log(t)})},getTree:function(e,t){for(var a=new Array,r=0;r<e.length;r++){var o=e[r].parentId;if(o==t){var i=this.getTree(e,e[r].id);i.length>0&&(e[r].children=i),a.push(e[r])}}return a},handleNodeClick:function(e,t){0!=e.type&&(this.form.option1.name=t.parent.data.name+"/"+e.name,this.form.option1.id=e.id,this.form.option1.pId=t.parent.data.id,this.show=!1)},treeShow:function(){this.show=!1,this.invited.map(function(e){e.show=!1})},areaSelect:function(){this.show=!this.show},handleNodeClick1:function(e,t){var a=0;this.invited.map(function(e,t){e.show&&(a=t)}),0!=e.type&&(this.invited[a].name=t.parent.data.name+"/"+e.name,this.invited[a].id=e.id,this.invited.map(function(e){e.show=!1}))},areaSelect1:function(e){this.invited.map(function(t,a){t.show=a==e})},addClassroom:function(){var e={id:0,name:"",show:!1};this.invited.push(e)},classroomDel:function(e){this.invited.splice(e,1)},uploadSuccess:function(e,t,a){var r=this;if(e.success){this.$myLayer.successLayer(e.msg),this.attachment=[];var o={};a.map(function(e){o.attachmentName=e.name,o.attachmentUrl=e.response.data,o.attachmentSize=e.size,r.attachment.push(o)})}},onSubmit:function(){var e=this;if(8001==this.courseOrder){var t={courseOrder:this.courseOrder,courseName:this.form.name,courseTypeCode:this.form.type,stageId:this.stageValue,subjectId:this.subjectValue,versionId:this.versionValue,gradeId:this.gradeValue,courseMaterialCode:this.form.catrgory.value,courseTeachingRoomCode:this.form.option1.id,ccourseTeachingUserId:this.form.teacher,courseIntroduction:this.form.intro,courseLiveCode:this.value?"1":"0",attachment:this.attachment,courseStartTime:this.$myLayer.timeFormat(this.form.date[0]),courseEndTime:this.$myLayer.timeFormat(this.form.date[1]),courseSection:this.form.num};this.$api.orderCourseDetailAdd(t).then(function(t){t.success&&e.$myLayer.successLayer(t.msg)})}else{var a={};a=8012==this.form.radio?{courseOrder:this.courseOrder,courseName:this.form.name,courseTypeCode:this.form.type,stageId:this.stageValue,subjectId:this.subjectValue,versionId:this.versionValue,gradeId:this.gradeValue,courseMaterialCode:this.form.catrgory.value,courseTeachingRoomCode:this.form.option1.id,ccourseTeachingUserId:this.form.teacher,courseIntroduction:this.form.intro,courseWay:this.form.radio,courseLiveCode:this.value?"1":"0",courseRecordWay:this.form.radio1,rooms:this.invited,attachment:this.attachment,courseStartTime:this.$myLayer.timeFormat(this.form.date[0]),courseEndTime:this.$myLayer.timeFormat(this.form.date[1]),courseSection:this.form.num}:{courseOrder:this.courseOrder,courseName:this.form.name,courseTypeCode:this.form.type,stageId:this.stageValue,subjectId:this.subjectValue,versionId:this.versionValue,gradeId:this.gradeValue,courseMaterialCode:this.form.catrgory.value,courseTeachingRoomCode:this.form.option1.id,ccourseTeachingUserId:this.form.teacher,courseIntroduction:this.form.intro,courseWay:this.form.radio,attachment:this.attachment,courseStartTime:this.$myLayer.timeFormat(this.form.date[0]),courseEndTime:this.$myLayer.timeFormat(this.form.date[1]),courseSection:this.form.num},this.$api.orderCourseDetailAdd(a).then(function(t){t.success&&e.$myLayer.successLayer(t.msg)})}}}},l=s,n=(a("1d1b"),a("331b"),a("2877")),c=Object(n["a"])(l,r,o,!1,null,"2fef56ce",null);c.options.__file="course-add.vue";t["default"]=c.exports},"7f7f":function(e,t,a){var r=a("86cc").f,o=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in o||a("9e1e")&&r(o,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},"9e5a":function(e,t,a){},a888:function(e,t,a){},ade3:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",function(){return r})}}]);
//# sourceMappingURL=chunk-419ad820.ed37148a.js.map